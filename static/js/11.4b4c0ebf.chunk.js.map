{"version":3,"sources":["../../../Warhammer/AOS Reminders/src/components/helpers/link.tsx","../../../Warhammer/AOS Reminders/src/components/modals/generic/generic_modal.tsx","../../../Warhammer/AOS Reminders/src/utils/openPopup.ts","../../../Warhammer/AOS Reminders/src/utils/hooks/useLogin.tsx","../../../Warhammer/AOS Reminders/src/components/page/contact.tsx","../../../Warhammer/AOS Reminders/src/components/modals/generic/generic_destructive_modal.tsx","../../../Warhammer/AOS Reminders/node_modules/react-switch/index.js","../../../Warhammer/AOS Reminders/node_modules/react-switch/dist/react-switch.min.js","../../../Warhammer/AOS Reminders/node_modules/@stripe/react-stripe-js/dist/react-stripe.umd.js","../../../Warhammer/AOS Reminders/node_modules/@stripe/stripe-js/dist/stripe.esm.js","../../../Warhammer/AOS Reminders/node_modules/react-copy-to-clipboard/lib/index.js","../../../Warhammer/AOS Reminders/node_modules/react-copy-to-clipboard/lib/Component.js","../../../Warhammer/AOS Reminders/node_modules/copy-to-clipboard/index.js","../../../Warhammer/AOS Reminders/node_modules/toggle-selection/index.js","../../../Warhammer/AOS Reminders/src/components/modals/paypal_cancellation_modal.tsx","../../../Warhammer/AOS Reminders/src/components/modals/stripe_cancellation_modal.tsx","../../../Warhammer/AOS Reminders/src/components/payment/giftSubscriptions.tsx","../../../Warhammer/AOS Reminders/src/components/routes/Profile.tsx"],"names":["LinkNewTab","_ref","href","children","label","props","_jsx","target","rel","LinkButton","Icon","btnClass","text","isMobile","useWindowSize","className","concat","onClick","e","logClick","_jsxs","centerContentClass","Modal","setAppElement","GenericModal","closeModal","isOpen","isProcessing","isDark","useTheme","modalClassName","contentLabel","onRequestClose","overlayClassName","ModalSpinner","hidden","variant","Spinner","size","openPopup","left","window","screenX","innerWidth","top","screenY","innerHeight","open","undefined","useLogin","isLoading","loginWithPopup","useAuth0","popupIsClosed","setPopupIsClosed","useState","useMemo","isLoggingIn","login","_e$preventDefault","preventDefault","call","origin","popup","timer","setInterval","closed","clearInterval","logEvent","onPopupClose","authorizationParams","redirect_uri","location","Contact","isOffline","useAppStatus","_Fragment","GITHUB_URL","FaGithub","FaEnvelopeOpenText","FaDiscord","GenericDestructiveModal","bodyText","confirmText","denyText","headerText","onConfirm","onConfirmAsync","onDeny","theme","setIsProcessing","btnReponsiveClass","GenericButton","modalDangerClass","async","err","console","error","FaCheck","modalConfirmClass","module","exports","require","Object","defineProperty","value","t","i","assign","arguments","length","s","n","prototype","hasOwnProperty","apply","this","createElement","viewBox","height","width","style","position","d","fill","fillRule","o","h","a","r","parseInt","substr","l","u","Math","round","toString","checked","handleDiameter","max","state","p","bind","v","g","k","M","m","T","$","C","D","O","S","__proto__","create","constructor","componentDidMount","W","componentDidUpdate","setState","componentWillUnmount","I","H","focus","R","j","B","Date","now","L","N","min","U","A","button","clientX","addEventListener","removeEventListener","X","touches","onChange","id","render","disabled","offColor","onColor","offHandleColor","onHandleColor","c","checkedIcon","uncheckedIcon","f","checkedHandleIcon","uncheckedHandleIcon","b","boxShadow","activeBoxShadow","y","w","borderRadius","indexOf","x","display","textAlign","opacity","direction","WebkitTransition","MozTransition","transition","touchAction","WebkitTapHighlightColor","WebkitUserSelect","MozUserSelect","msUserSelect","userSelect","margin","background","cursor","pointerEvents","right","transform","outline","border","z","onMouseDown","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","type","role","clip","overflow","padding","ref","onFocus","onBlur","onKeyUp","Component","defaultProps","default","React","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","_objectSpread2","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","_typeof","obj","Symbol","iterator","configurable","writable","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","propertyIsEnumerable","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","Array","isArray","_i","_s","_e","_arr","_n","_d","next","done","minLen","_arrayLikeToArray","slice","name","from","test","len","arr2","TypeError","createCommonjsModule","fn","ReactPropTypesSecret_1","emptyFunction","emptyFunctionWithReset","resetWarningCache","factoryWithThrowingShims","shim","propName","componentName","propFullName","secret","Error","getShim","isRequired","ReactPropTypes","array","bool","func","number","string","symbol","any","arrayOf","element","elementType","instanceOf","node","objectOf","oneOf","oneOfType","shape","exact","checkPropTypes","PropTypes","propTypes","usePrevious","useRef","useEffect","current","isUnknownObject","raw","isPromise","then","isStripe","elements","createToken","createPaymentMethod","confirmCardPayment","PLAIN_OBJECT_STR","isEqual","leftArray","leftPlainObject","leftKeys","rightKeys","keySet","allKeys","pred","every","extractAllowedOptionsUpdates","options","prevOptions","immutableKeys","reduce","newOptions","isUpdated","includes","warn","INVALID_STRIPE_ERROR","validateStripe","maybeStripe","errorMsg","parseStripeProp","tag","stripePromise","Promise","resolve","result","stripe","registerWithStripeJs","_registerWrapper","registerAppInfo","version","url","_excluded","CustomCheckoutSdkContext","createContext","displayName","parseCustomCheckoutSdkContext","ctx","useCase","CustomCheckoutContext","extractCustomCheckoutContextValue","customCheckoutSdk","sessionState","on","session","actions","INVALID_STRIPE_ERROR$1","CustomCheckoutProvider","rawStripeProp","parsed","_React$useState2","setSession","_React$useState4","setContext","safeSetContext","initCustomCheckoutCalledRef","isMounted","initCustomCheckout","prevStripe","_prevOptions$elements","_options$elementsOpti","clientSecret","previousAppearance","elementsOptions","appearance","currentAppearance","changeAppearance","customCheckoutContextValue","Provider","useCustomCheckoutSdkContextWithUseCase","useCaseString","useContext","useElementsOrCustomCheckoutSdkContextWithUseCase","customCheckoutSdkContext","elementsContext","ElementsContext","parseElementsContext","useCustomCheckout","CartElementContext","parseCartElementContext","Elements","cart","setCart","cartState","setCartState","_React$useState6","updates","update","useElementsContextWithUseCase","useCaseMessage","DUMMY_CART_ELEMENT_CONTEXT","useCartElementContextWithUseCase","isInCustomCheckout","useElements","useStripe","useCartElement","useCartElementState","ElementsConsumer","_ref2","useAttachEvent","event","cb","cbDefined","cbRef","decoratedCb","off","capitalized","str","charAt","toUpperCase","createElementComponent","isServer","Element","readyCallback","_ref$options","onReady","onEscape","onLoadError","onLoaderStart","onNetworksChange","onCheckout","onLineItemClick","onCancel","onShippingAddressChange","onShippingRateChange","setElement","elementRef","domNode","_useCartElementContex","useLayoutEffect","newElement","mount","destroy","__elementType","EmbeddedCheckoutContext","useEmbeddedCheckoutContext","INVALID_STRIPE_ERROR$2","EmbeddedCheckoutProvider","embeddedCheckoutPromise","loadedStripe","embeddedCheckout","setStripeAndInitEmbeddedCheckout","initEmbeddedCheckout","onComplete","EmbeddedCheckoutClientElement","unmount","EmbeddedCheckoutServerElement","EmbeddedCheckout","AuBankAccountElement","CardElement","CardNumberElement","CardExpiryElement","CardCvcElement","FpxBankElement","IbanElement","IdealBankElement","P24BankElement","EpsBankElement","PaymentElement","ExpressCheckoutElement","PaymentRequestButtonElement","LinkAuthenticationElement","AddressElement","ShippingAddressElement","CartElement","PaymentMethodMessagingElement","AffirmMessageElement","AfterpayClearpayMessageElement","factory","V3_URL","V3_URL_REGEX","EXISTING_SCRIPT_MESSAGE","loadScript","params","reject","document","Stripe","script","scripts","querySelectorAll","src","findScript","queryString","advancedFraudSignals","headOrBody","head","body","appendChild","injectScript","stripePromise$1","loadCalled","loadStripe","_len","args","_key","startTime","registerWrapper","initStripe","CopyToClipboard","_react","_interopRequireDefault","_copyToClipboard","__esModule","_objectSpread","_defineProperties","descriptor","_setPrototypeOf","setPrototypeOf","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","Super","_getPrototypeOf","NewTarget","self","_assertThisInitialized","_possibleConstructorReturn","ReferenceError","getPrototypeOf","_React$PureComponent","subClass","superClass","_inherits","Constructor","protoProps","staticProps","_super","_this","instance","_classCallCheck","_this$props","onCopy","elem","Children","only","_this$props2","cloneElement","PureComponent","deselectCurrent","clipboardToIE11Formatting","debug","message","reselectPrevious","range","selection","mark","success","createRange","getSelection","textContent","ariaHidden","all","whiteSpace","webkitUserSelect","stopPropagation","format","clipboardData","clearData","setData","selectNodeContents","addRange","execCommand","copyKey","navigator","userAgent","replace","prompt","removeRange","removeAllRanges","removeChild","rangeCount","active","activeElement","ranges","getRangeAt","tagName","blur","CancelPaypalSubscriptionModal","modalIsOpen","subscription","useSubscription","handleClick","isDev","subscriptionId","CancelStripeSubscriptionModal","cancelSubscription","COL_SIZE","GiftSubscriptionsComponent","isActive","GiftTable","PlansHeader","PurchaseTable","giftSubscriptions","purchasedSubs","adminCreatedSubs","rowClass","map","_createElement","GiftButton","FaRegSmileBeam","planInterval","planIntervalCount","copied","setCopied","capitalize","handleCopy","setTimeout","genericButton","FaGift","GiftedSubscriptionPlans","plan","PlanComponent","supportPlan","title","user","isAuthenticated","quantity","setQuantity","maxWidth","parseFloat","cost","toFixed","price","stripe_dev","stripe_prod","item","redirectToCheckout","mode","lineItems","customerEmail","email","clientReferenceId","successUrl","protocol","qs","stringify","gifted","cancelUrl","canceled","log","STRIPE_KEY","GiftSubscriptions","Navbar","lazy","Profile","getSubscription","logPageView","LoadingBody","bgColor","headerColor","Suspense","fallback","LoadingHeader","UserCard","isSubscribed","ToggleTheme","SubscriptionInfo","subscriptionStatus","RecurringPaymentInfo","EmailVerified","Help","CancelBtn","isCanceled","createdByPaypal","isLight","setModalIsOpen","ModelComponent","openModal","hasActiveGrant","hasExpiredGrant","isPending","TemporaryGrantComponent","card","profileCardHeader","MdCheckCircle","MdNotInterested","cardBody","DateTime","fromSeconds","subscriptionStart","toLocaleString","DATE_MED","plus","createdBy","titleCase","SubscriptionExpired","FaSearchDollar","FaPaypal","isGifted","toggleTheme","htmlFor","Switch","Link","to","ROUTES","SUBSCRIBE"],"mappings":"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","file":"static/js/11.4b4c0ebf.chunk.js","sourcesContent":["import React from 'react'\r\nimport { IconType } from 'react-icons'\r\nimport { centerContentClass } from 'theme/helperClasses'\r\nimport { logClick } from 'utils/analytics'\r\nimport useWindowSize from 'utils/hooks/useWindowSize'\r\n\r\ninterface ILinkProps {\r\n  className?: string\r\n  href: string\r\n  label: string\r\n  onClick?: (...args: any[]) => void\r\n}\r\n\r\nexport const LinkNewTab = ({ href, children, label, ...props }: React.PropsWithChildren<ILinkProps>) => (\r\n  <a href={href} target=\"_blank\" rel=\"noopener noreferrer\" aria-label={label} {...props}>\r\n    {children}\r\n  </a>\r\n)\r\n\r\ninterface ILinkBtnProps {\r\n  href: string\r\n  btnClass: string\r\n  Icon: IconType\r\n  text: string\r\n}\r\n\r\nexport const LinkButton = (props: ILinkBtnProps) => {\r\n  const { Icon, href, btnClass, text } = props\r\n  const { isMobile } = useWindowSize()\r\n\r\n  return (\r\n    <LinkNewTab\r\n      href={href}\r\n      className={`${btnClass} mb-1`}\r\n      onClick={e => logClick(`Contact-${text}`)}\r\n      label={text}\r\n    >\r\n      <div className={centerContentClass}>\r\n        <Icon className={isMobile ? `mx-2 my-1` : `mr-2`} />\r\n        {isMobile ? `` : ` ${text}`}\r\n      </div>\r\n    </LinkNewTab>\r\n  )\r\n}\r\n","import Spinner from 'components/helpers/spinner'\r\nimport { useTheme } from 'context/useTheme'\r\nimport React from 'react'\r\nimport Modal from 'react-modal'\r\n\r\ninterface IGenericModalProps {\r\n  isProcessing?: boolean\r\n  isOpen: boolean\r\n  closeModal: () => void\r\n  label: string\r\n}\r\n\r\nModal.setAppElement('#root')\r\n\r\nconst GenericModal = (props: React.PropsWithChildren<IGenericModalProps>) => {\r\n  const { children, closeModal, isOpen, label, isProcessing = false } = props\r\n  const { isDark } = useTheme()\r\n\r\n  const themeType = isDark ? 'Dark' : 'Light'\r\n  const modalClassName = `Modal-${isProcessing ? `Transparent` : themeType}`\r\n\r\n  return (\r\n    <Modal\r\n      className={modalClassName}\r\n      contentLabel={label}\r\n      isOpen={isOpen}\r\n      onRequestClose={closeModal}\r\n      overlayClassName={'Modal-Overlay'}\r\n    >\r\n      <div className={`container`}>\r\n        {isProcessing && <ModalSpinner />}\r\n        <div hidden={isProcessing}>{children}</div>\r\n      </div>\r\n    </Modal>\r\n  )\r\n}\r\n\r\nexport default GenericModal\r\n\r\nconst ModalSpinner = ({ isDark = false }) => {\r\n  const variant = isDark ? 'light-gray' : 'dark'\r\n  return (\r\n    <div className={`d-flex flex-row justify-content-center`}>\r\n      <Spinner variant={variant} size=\"large\" />\r\n    </div>\r\n  )\r\n}\r\n","const openPopup = () => {\r\n  const width = 400\r\n  const height = 600\r\n  const left = window.screenX + (window.innerWidth - width) / 2\r\n  const top = window.screenY + (window.innerHeight - height) / 2\r\n\r\n  return window.open(\r\n    undefined,\r\n    'auth0:authorize:popup',\r\n    `left=${left},top=${top},width=${width},height=${height},resizable,scrollbars=yes,status=1`\r\n  )\r\n}\r\n\r\nexport default openPopup\r\n","import { useAuth0 } from '@auth0/auth0-react'\r\nimport { useMemo, useState } from 'react'\r\nimport { logClick, logEvent } from 'utils/analytics'\r\nimport openPopup from 'utils/openPopup'\r\n\r\ninterface IUseLoginProps {\r\n  /**\r\n   * The source of this login, e.g. 'Navbar'\r\n   */\r\n  origin: string\r\n  /**\r\n   * An optional function to run after the user has closed the login popup\r\n   *\r\n   * Note: This is triggered whether the user logged in successfully, or just closed the window.\r\n   */\r\n  onPopupClose?: () => unknown\r\n}\r\n\r\n/**\r\n * A useful hook to help with logins\r\n *\r\n * Includes a tracker for the login window that can notify you when closed.\r\n *\r\n * @param props\r\n *\r\n * @example const { login } =  useLogin({ origin: 'Navbar' })\r\n */\r\nconst useLogin = (props: IUseLoginProps) => {\r\n  const { isLoading, loginWithPopup } = useAuth0()\r\n  const [popupIsClosed, setPopupIsClosed] = useState(false)\r\n\r\n  const value = useMemo(\r\n    () => ({\r\n      isLoggingIn: isLoading && !popupIsClosed,\r\n      popupIsClosed,\r\n      login: (e?: any) => {\r\n        e?.preventDefault?.()\r\n        logClick(`${props.origin}-Login`)\r\n\r\n        const popup = openPopup()\r\n        setPopupIsClosed(false)\r\n\r\n        // https://stackoverflow.com/a/48240128\r\n        const timer = setInterval(() => {\r\n          if (popup?.closed) {\r\n            clearInterval(timer)\r\n            setPopupIsClosed(true)\r\n            logEvent(`${props.origin}-Login-Closed`)\r\n            if (props.onPopupClose) props.onPopupClose()\r\n          }\r\n        }, 1000)\r\n\r\n        return loginWithPopup({ authorizationParams: { redirect_uri: window.location.href } }, { popup })\r\n      },\r\n    }),\r\n    [isLoading, loginWithPopup, popupIsClosed, props]\r\n  )\r\n\r\n  return value\r\n}\r\n\r\nexport default useLogin\r\n","import { LinkButton } from 'components/helpers/link'\r\nimport { useAppStatus } from 'context/useAppStatus'\r\nimport { useTheme } from 'context/useTheme'\r\nimport { FaDiscord, FaEnvelopeOpenText, FaGithub } from 'react-icons/fa'\r\nimport { GITHUB_URL } from 'utils/env'\r\n\r\ninterface IContactProps {\r\n  size?: 'normal' | 'small' | 'large'\r\n}\r\n\r\nconst Contact = ({ size = 'normal' }: IContactProps) => {\r\n  const { isOffline } = useAppStatus()\r\n  const { isDark } = useTheme()\r\n  const btnSize = size === 'small' ? 'btn-sm' : size === 'large' ? 'btn-lg' : ''\r\n  const btnClass = `btn ${btnSize} btn-outline-${isDark ? `light` : `dark`} mx-1`\r\n\r\n  if (isOffline) return null\r\n\r\n  return (\r\n    <>\r\n      <LinkButton href={GITHUB_URL} btnClass={btnClass} Icon={FaGithub} text={'Github'} />\r\n      <LinkButton\r\n        href=\"mailto:aosreminders@gmail.com\"\r\n        btnClass={btnClass}\r\n        Icon={FaEnvelopeOpenText}\r\n        text={'Email'}\r\n      />\r\n      {/* <LinkButton href=\"//reddit.com/r/AoSReminders/\" btnClass={btnClass} Icon={FaReddit} text={'Reddit'} /> */}\r\n      <LinkButton href=\"//discord.gg/2nt9Fxp\" btnClass={btnClass} Icon={FaDiscord} text={'Discord'} />\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Contact\r\n","import GenericButton from 'components/input/generic_button'\r\nimport GenericModal from 'components/modals/generic/generic_modal'\r\nimport { useTheme } from 'context/useTheme'\r\nimport React, { useState } from 'react'\r\nimport { FaCheck } from 'react-icons/fa'\r\n\r\ninterface IModalComponentProps {\r\n  closeModal: () => any\r\n  confirmText?: string\r\n  denyText?: string\r\n  isOpen: boolean\r\n  onConfirmAsync?: () => Promise<any>\r\n  onConfirm?: () => any\r\n  onDeny?: () => any\r\n  headerText: string\r\n  bodyText?: string\r\n}\r\n\r\n/**\r\n * A re-usable generic confirmation modal component\r\n *\r\n * Ask if we really want to do a destructive action.\r\n *\r\n * @param props\r\n */\r\nconst GenericDestructiveModal = (props: React.PropsWithChildren<IModalComponentProps>) => {\r\n  const {\r\n    bodyText = '',\r\n    children,\r\n    closeModal,\r\n    confirmText = 'Confirm',\r\n    denyText = 'Cancel',\r\n    headerText,\r\n    isOpen,\r\n    onConfirm = null,\r\n    onConfirmAsync = null,\r\n    onDeny = null,\r\n  } = props\r\n  const { theme } = useTheme()\r\n  const [isProcessing, setIsProcessing] = useState(false)\r\n\r\n  const handleConfirm = async (e: React.MouseEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (onConfirmAsync) {\r\n      try {\r\n        setIsProcessing(true)\r\n        await onConfirmAsync()\r\n      } catch (err) {\r\n        console.error(err)\r\n      }\r\n    }\r\n\r\n    if (onConfirm) onConfirm()\r\n\r\n    closeModal()\r\n  }\r\n\r\n  const handleDeny = async (e: React.MouseEvent) => {\r\n    e.preventDefault()\r\n    if (onDeny) onDeny()\r\n    closeModal()\r\n  }\r\n\r\n  const btnReponsiveClass = `mx-2 mx-sm-1`\r\n\r\n  return (\r\n    <GenericModal\r\n      isOpen={isOpen}\r\n      isProcessing={isProcessing}\r\n      closeModal={closeModal}\r\n      label={`${headerText} Confirmation Modal`}\r\n    >\r\n      <div className=\"flex-row\">\r\n        <div className={`col ${theme.text} text-center`}>\r\n          <h4 className=\"mb-3\">{headerText}</h4>\r\n          {bodyText && <p className=\"mb-3\">{bodyText}</p>}\r\n          {children ? <div className={`mb-3`}>{children}</div> : null}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"d-flex flex-row justify-content-around\">\r\n        <GenericButton className={`${theme.modalDangerClass} ${btnReponsiveClass}`} onClick={handleConfirm}>\r\n          <FaCheck className=\"mr-2\" /> {confirmText}\r\n        </GenericButton>\r\n        <GenericButton className={`${theme.modalConfirmClass} ${btnReponsiveClass}`} onClick={handleDeny}>\r\n          {denyText}\r\n        </GenericButton>\r\n      </div>\r\n    </GenericModal>\r\n  )\r\n}\r\n\r\nexport default GenericDestructiveModal\r\n","if (process.env.NODE_ENV === \"production\") {\n  module.exports = require(\"./dist/react-switch.min.js\");\n} else {\n  module.exports = require(\"./dist/react-switch.dev.js\");\n}\n","Object.defineProperty(exports,\"__esModule\",{value:!0});var t=require(\"react\");function i(){return(i=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t}).apply(this,arguments)}var s=t.createElement(\"svg\",{viewBox:\"-2 -5 14 20\",height:\"100%\",width:\"100%\",style:{position:\"absolute\",top:0}},t.createElement(\"path\",{d:\"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12\",fill:\"#fff\",fillRule:\"evenodd\"})),n=t.createElement(\"svg\",{height:\"100%\",width:\"100%\",viewBox:\"-2 -5 17 21\",style:{position:\"absolute\",top:0}},t.createElement(\"path\",{d:\"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0\",fill:\"#fff\",fillRule:\"evenodd\"}));function o(t){if(7===t.length)return t;for(var i=\"#\",s=1;s<4;s+=1)i+=t[s]+t[s];return i}function h(t,i,s,n,h){return function(t,i,s,n,o){var h=(t-s)/(i-s);if(0===h)return n;if(1===h)return o;for(var e=\"#\",a=1;a<6;a+=2){var r=parseInt(n.substr(a,2),16),l=parseInt(o.substr(a,2),16),u=Math.round((1-h)*r+h*l).toString(16);1===u.length&&(u=\"0\"+u),e+=u}return e}(t,i,s,o(n),o(h))}var e=function(s){function n(t){s.call(this,t);var i=t.height,n=t.width,o=t.checked;this.t=t.handleDiameter||i-2,this.i=Math.max(n-i,n-(i+this.t)/2),this.o=Math.max(0,(i-this.t)/2),this.state={h:o?this.i:this.o},this.l=0,this.u=0,this.p=this.p.bind(this),this.v=this.v.bind(this),this.g=this.g.bind(this),this.k=this.k.bind(this),this.M=this.M.bind(this),this.m=this.m.bind(this),this.T=this.T.bind(this),this.$=this.$.bind(this),this.C=this.C.bind(this),this.D=this.D.bind(this),this.O=this.O.bind(this),this.S=this.S.bind(this)}return s&&(n.__proto__=s),(n.prototype=Object.create(s&&s.prototype)).constructor=n,n.prototype.componentDidMount=function(){this.W=!0},n.prototype.componentDidUpdate=function(t){t.checked!==this.props.checked&&this.setState({h:this.props.checked?this.i:this.o})},n.prototype.componentWillUnmount=function(){this.W=!1},n.prototype.I=function(t){this.H.focus(),this.setState({R:t,j:!0,B:Date.now()})},n.prototype.L=function(t){var i=this.state,s=i.R,n=i.h,o=(this.props.checked?this.i:this.o)+t-s;i.N||t===s||this.setState({N:!0});var h=Math.min(this.i,Math.max(this.o,o));h!==n&&this.setState({h:h})},n.prototype.U=function(t){var i=this.state,s=i.h,n=i.N,o=i.B,h=this.props.checked,e=(this.i+this.o)/2;this.setState({h:this.props.checked?this.i:this.o});var a=Date.now()-o;(!n||a<250||(h&&s<=e||!h&&s>=e))&&this.A(t),this.W&&this.setState({N:!1,j:!1}),this.l=Date.now()},n.prototype.p=function(t){t.preventDefault(),\"number\"==typeof t.button&&0!==t.button||(this.I(t.clientX),window.addEventListener(\"mousemove\",this.v),window.addEventListener(\"mouseup\",this.g))},n.prototype.v=function(t){t.preventDefault(),this.L(t.clientX)},n.prototype.g=function(t){this.U(t),window.removeEventListener(\"mousemove\",this.v),window.removeEventListener(\"mouseup\",this.g)},n.prototype.k=function(t){this.X=null,this.I(t.touches[0].clientX)},n.prototype.M=function(t){this.L(t.touches[0].clientX)},n.prototype.m=function(t){t.preventDefault(),this.U(t)},n.prototype.$=function(t){Date.now()-this.l>50&&(this.A(t),Date.now()-this.u>50&&this.W&&this.setState({j:!1}))},n.prototype.C=function(){this.u=Date.now()},n.prototype.D=function(){this.setState({j:!0})},n.prototype.O=function(){this.setState({j:!1})},n.prototype.S=function(t){this.H=t},n.prototype.T=function(t){t.preventDefault(),this.H.focus(),this.A(t),this.W&&this.setState({j:!1})},n.prototype.A=function(t){var i=this.props;(0,i.onChange)(!i.checked,t,i.id)},n.prototype.render=function(){var s=this.props,n=s.checked,o=s.disabled,e=s.className,a=s.offColor,r=s.onColor,l=s.offHandleColor,u=s.onHandleColor,c=s.checkedIcon,d=s.uncheckedIcon,f=s.checkedHandleIcon,p=s.uncheckedHandleIcon,b=s.boxShadow,v=s.activeBoxShadow,g=s.height,y=s.width,w=s.borderRadius,k=function(t,i){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&-1===i.indexOf(n)&&(s[n]=t[n]);return s}(s,[\"checked\",\"disabled\",\"className\",\"offColor\",\"onColor\",\"offHandleColor\",\"onHandleColor\",\"checkedIcon\",\"uncheckedIcon\",\"checkedHandleIcon\",\"uncheckedHandleIcon\",\"boxShadow\",\"activeBoxShadow\",\"height\",\"width\",\"borderRadius\",\"handleDiameter\"]),M=this.state,m=M.h,T=M.N,x=M.j,$={position:\"relative\",display:\"inline-block\",textAlign:\"left\",opacity:o?.5:1,direction:\"ltr\",borderRadius:g/2,WebkitTransition:\"opacity 0.25s\",MozTransition:\"opacity 0.25s\",transition:\"opacity 0.25s\",touchAction:\"none\",WebkitTapHighlightColor:\"rgba(0, 0, 0, 0)\",WebkitUserSelect:\"none\",MozUserSelect:\"none\",msUserSelect:\"none\",userSelect:\"none\"},C={height:g,width:y,margin:Math.max(0,(this.t-g)/2),position:\"relative\",background:h(m,this.i,this.o,a,r),borderRadius:\"number\"==typeof w?w:g/2,cursor:o?\"default\":\"pointer\",WebkitTransition:T?null:\"background 0.25s\",MozTransition:T?null:\"background 0.25s\",transition:T?null:\"background 0.25s\"},D={height:g,width:Math.min(1.5*g,y-(this.t+g)/2+1),position:\"relative\",opacity:(m-this.o)/(this.i-this.o),pointerEvents:\"none\",WebkitTransition:T?null:\"opacity 0.25s\",MozTransition:T?null:\"opacity 0.25s\",transition:T?null:\"opacity 0.25s\"},O={height:g,width:Math.min(1.5*g,y-(this.t+g)/2+1),position:\"absolute\",opacity:1-(m-this.o)/(this.i-this.o),right:0,top:0,pointerEvents:\"none\",WebkitTransition:T?null:\"opacity 0.25s\",MozTransition:T?null:\"opacity 0.25s\",transition:T?null:\"opacity 0.25s\"},S={height:this.t,width:this.t,background:h(m,this.i,this.o,l,u),display:\"inline-block\",cursor:o?\"default\":\"pointer\",borderRadius:\"number\"==typeof w?w-1:\"50%\",position:\"absolute\",transform:\"translateX(\"+m+\"px)\",top:Math.max(0,(g-this.t)/2),outline:0,boxShadow:x?v:b,border:0,WebkitTransition:T?null:\"background-color 0.25s, transform 0.25s, box-shadow 0.15s\",MozTransition:T?null:\"background-color 0.25s, transform 0.25s, box-shadow 0.15s\",transition:T?null:\"background-color 0.25s, transform 0.25s, box-shadow 0.15s\"},W={height:this.t,width:this.t,opacity:Math.max(2*(1-(m-this.o)/(this.i-this.o)-.5),0),position:\"absolute\",left:0,top:0,pointerEvents:\"none\",WebkitTransition:T?null:\"opacity 0.25s\",MozTransition:T?null:\"opacity 0.25s\",transition:T?null:\"opacity 0.25s\"},z={height:this.t,width:this.t,opacity:Math.max(2*((m-this.o)/(this.i-this.o)-.5),0),position:\"absolute\",left:0,top:0,pointerEvents:\"none\",WebkitTransition:T?null:\"opacity 0.25s\",MozTransition:T?null:\"opacity 0.25s\",transition:T?null:\"opacity 0.25s\"};return t.createElement(\"div\",{className:e,style:$},t.createElement(\"div\",{className:\"react-switch-bg\",style:C,onClick:o?null:this.T,onMouseDown:function(t){return t.preventDefault()}},c&&t.createElement(\"div\",{style:D},c),d&&t.createElement(\"div\",{style:O},d)),t.createElement(\"div\",{className:\"react-switch-handle\",style:S,onClick:function(t){return t.preventDefault()},onMouseDown:o?null:this.p,onTouchStart:o?null:this.k,onTouchMove:o?null:this.M,onTouchEnd:o?null:this.m,onTouchCancel:o?null:this.O},p&&t.createElement(\"div\",{style:W},p),f&&t.createElement(\"div\",{style:z},f)),t.createElement(\"input\",i({},{type:\"checkbox\",role:\"switch\",\"aria-checked\":n,checked:n,disabled:o,style:{border:0,clip:\"rect(0 0 0 0)\",height:1,margin:-1,overflow:\"hidden\",padding:0,position:\"absolute\",width:1}},k,{ref:this.S,onFocus:this.D,onBlur:this.O,onKeyUp:this.C,onChange:this.$})))},n}(t.Component);e.defaultProps={disabled:!1,offColor:\"#888\",onColor:\"#080\",offHandleColor:\"#fff\",onHandleColor:\"#fff\",uncheckedIcon:s,checkedIcon:n,boxShadow:null,activeBoxShadow:\"0 0 2px 3px #3bf\",height:28,width:56},exports.default=e;\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) :\n  (global = global || self, factory(global.ReactStripe = {}, global.React));\n}(this, (function (exports, React) { 'use strict';\n\n  React = React && Object.prototype.hasOwnProperty.call(React, 'default') ? React['default'] : React;\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n\n      if (enumerableOnly) {\n        symbols = symbols.filter(function (sym) {\n          return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n        });\n      }\n\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(Object(source), true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(Object(source)).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  function _typeof(obj) {\n    \"@babel/helpers - typeof\";\n\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function (obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function (obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _slicedToArray(arr, i) {\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]);\n\n    if (_i == null) return;\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n\n    var _s, _e;\n\n    try {\n      for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function createCommonjsModule(fn, module) {\n  \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n  }\n\n  /**\n   * Copyright (c) 2013-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n\n  var ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n  var ReactPropTypesSecret_1 = ReactPropTypesSecret;\n\n  function emptyFunction() {}\n\n  function emptyFunctionWithReset() {}\n\n  emptyFunctionWithReset.resetWarningCache = emptyFunction;\n\n  var factoryWithThrowingShims = function () {\n    function shim(props, propName, componentName, location, propFullName, secret) {\n      if (secret === ReactPropTypesSecret_1) {\n        // It is still safe when called from React.\n        return;\n      }\n\n      var err = new Error('Calling PropTypes validators directly is not supported by the `prop-types` package. ' + 'Use PropTypes.checkPropTypes() to call them. ' + 'Read more at http://fb.me/use-check-prop-types');\n      err.name = 'Invariant Violation';\n      throw err;\n    }\n    shim.isRequired = shim;\n\n    function getShim() {\n      return shim;\n    }\n    // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\n    var ReactPropTypes = {\n      array: shim,\n      bool: shim,\n      func: shim,\n      number: shim,\n      object: shim,\n      string: shim,\n      symbol: shim,\n      any: shim,\n      arrayOf: getShim,\n      element: shim,\n      elementType: shim,\n      instanceOf: getShim,\n      node: shim,\n      objectOf: getShim,\n      oneOf: getShim,\n      oneOfType: getShim,\n      shape: getShim,\n      exact: getShim,\n      checkPropTypes: emptyFunctionWithReset,\n      resetWarningCache: emptyFunction\n    };\n    ReactPropTypes.PropTypes = ReactPropTypes;\n    return ReactPropTypes;\n  };\n\n  var propTypes = createCommonjsModule(function (module) {\n  /**\n   * Copyright (c) 2013-present, Facebook, Inc.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   */\n  {\n    // By explicitly using `prop-types` you are opting into new production behavior.\n    // http://fb.me/prop-types-in-prod\n    module.exports = factoryWithThrowingShims();\n  }\n  });\n\n  var usePrevious = function usePrevious(value) {\n    var ref = React.useRef(value);\n    React.useEffect(function () {\n      ref.current = value;\n    }, [value]);\n    return ref.current;\n  };\n\n  var isUnknownObject = function isUnknownObject(raw) {\n    return raw !== null && _typeof(raw) === 'object';\n  };\n  var isPromise = function isPromise(raw) {\n    return isUnknownObject(raw) && typeof raw.then === 'function';\n  }; // We are using types to enforce the `stripe` prop in this lib,\n  // but in an untyped integration `stripe` could be anything, so we need\n  // to do some sanity validation to prevent type errors.\n\n  var isStripe = function isStripe(raw) {\n    return isUnknownObject(raw) && typeof raw.elements === 'function' && typeof raw.createToken === 'function' && typeof raw.createPaymentMethod === 'function' && typeof raw.confirmCardPayment === 'function';\n  };\n\n  var PLAIN_OBJECT_STR = '[object Object]';\n  var isEqual = function isEqual(left, right) {\n    if (!isUnknownObject(left) || !isUnknownObject(right)) {\n      return left === right;\n    }\n\n    var leftArray = Array.isArray(left);\n    var rightArray = Array.isArray(right);\n    if (leftArray !== rightArray) return false;\n    var leftPlainObject = Object.prototype.toString.call(left) === PLAIN_OBJECT_STR;\n    var rightPlainObject = Object.prototype.toString.call(right) === PLAIN_OBJECT_STR;\n    if (leftPlainObject !== rightPlainObject) return false; // not sure what sort of special object this is (regexp is one option), so\n    // fallback to reference check.\n\n    if (!leftPlainObject && !leftArray) return left === right;\n    var leftKeys = Object.keys(left);\n    var rightKeys = Object.keys(right);\n    if (leftKeys.length !== rightKeys.length) return false;\n    var keySet = {};\n\n    for (var i = 0; i < leftKeys.length; i += 1) {\n      keySet[leftKeys[i]] = true;\n    }\n\n    for (var _i = 0; _i < rightKeys.length; _i += 1) {\n      keySet[rightKeys[_i]] = true;\n    }\n\n    var allKeys = Object.keys(keySet);\n\n    if (allKeys.length !== leftKeys.length) {\n      return false;\n    }\n\n    var l = left;\n    var r = right;\n\n    var pred = function pred(key) {\n      return isEqual(l[key], r[key]);\n    };\n\n    return allKeys.every(pred);\n  };\n\n  var extractAllowedOptionsUpdates = function extractAllowedOptionsUpdates(options, prevOptions, immutableKeys) {\n    if (!isUnknownObject(options)) {\n      return null;\n    }\n\n    return Object.keys(options).reduce(function (newOptions, key) {\n      var isUpdated = !isUnknownObject(prevOptions) || !isEqual(options[key], prevOptions[key]);\n\n      if (immutableKeys.includes(key)) {\n        if (isUpdated) {\n          console.warn(\"Unsupported prop change: options.\".concat(key, \" is not a mutable property.\"));\n        }\n\n        return newOptions;\n      }\n\n      if (!isUpdated) {\n        return newOptions;\n      }\n\n      return _objectSpread2(_objectSpread2({}, newOptions || {}), {}, _defineProperty({}, key, options[key]));\n    }, null);\n  };\n\n  var INVALID_STRIPE_ERROR = 'Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.'; // We are using types to enforce the `stripe` prop in this lib, but in a real\n  // integration `stripe` could be anything, so we need to do some sanity\n  // validation to prevent type errors.\n\n  var validateStripe = function validateStripe(maybeStripe) {\n    var errorMsg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : INVALID_STRIPE_ERROR;\n\n    if (maybeStripe === null || isStripe(maybeStripe)) {\n      return maybeStripe;\n    }\n\n    throw new Error(errorMsg);\n  };\n\n  var parseStripeProp = function parseStripeProp(raw) {\n    var errorMsg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : INVALID_STRIPE_ERROR;\n\n    if (isPromise(raw)) {\n      return {\n        tag: 'async',\n        stripePromise: Promise.resolve(raw).then(function (result) {\n          return validateStripe(result, errorMsg);\n        })\n      };\n    }\n\n    var stripe = validateStripe(raw, errorMsg);\n\n    if (stripe === null) {\n      return {\n        tag: 'empty'\n      };\n    }\n\n    return {\n      tag: 'sync',\n      stripe: stripe\n    };\n  };\n\n  var registerWithStripeJs = function registerWithStripeJs(stripe) {\n    if (!stripe || !stripe._registerWrapper || !stripe.registerAppInfo) {\n      return;\n    }\n\n    stripe._registerWrapper({\n      name: 'react-stripe-js',\n      version: \"2.4.0\"\n    });\n\n    stripe.registerAppInfo({\n      name: 'react-stripe-js',\n      version: \"2.4.0\",\n      url: 'https://stripe.com/docs/stripe-js/react'\n    });\n  };\n\n  var _excluded = [\"on\", \"session\"];\n  var CustomCheckoutSdkContext = /*#__PURE__*/React.createContext(null);\n  CustomCheckoutSdkContext.displayName = 'CustomCheckoutSdkContext';\n  var parseCustomCheckoutSdkContext = function parseCustomCheckoutSdkContext(ctx, useCase) {\n    if (!ctx) {\n      throw new Error(\"Could not find CustomCheckoutProvider context; You need to wrap the part of your app that \".concat(useCase, \" in an <CustomCheckoutProvider> provider.\"));\n    }\n\n    return ctx;\n  };\n  var CustomCheckoutContext = /*#__PURE__*/React.createContext(null);\n  CustomCheckoutContext.displayName = 'CustomCheckoutContext';\n  var extractCustomCheckoutContextValue = function extractCustomCheckoutContextValue(customCheckoutSdk, sessionState) {\n    if (!customCheckoutSdk) {\n      return null;\n    }\n\n    var _on = customCheckoutSdk.on,\n        _session = customCheckoutSdk.session,\n        actions = _objectWithoutProperties(customCheckoutSdk, _excluded);\n\n    if (!sessionState) {\n      return _objectSpread2(_objectSpread2({}, actions), customCheckoutSdk.session());\n    }\n\n    return _objectSpread2(_objectSpread2({}, actions), sessionState);\n  };\n  var INVALID_STRIPE_ERROR$1 = 'Invalid prop `stripe` supplied to `CustomCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.';\n  var CustomCheckoutProvider = function CustomCheckoutProvider(_ref) {\n    var rawStripeProp = _ref.stripe,\n        options = _ref.options,\n        children = _ref.children;\n    var parsed = React.useMemo(function () {\n      return parseStripeProp(rawStripeProp, INVALID_STRIPE_ERROR$1);\n    }, [rawStripeProp]); // State used to trigger a re-render when sdk.session is updated\n\n    var _React$useState = React.useState(null),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        session = _React$useState2[0],\n        setSession = _React$useState2[1];\n\n    var _React$useState3 = React.useState(function () {\n      return {\n        stripe: parsed.tag === 'sync' ? parsed.stripe : null,\n        customCheckoutSdk: null\n      };\n    }),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        ctx = _React$useState4[0],\n        setContext = _React$useState4[1];\n\n    var safeSetContext = function safeSetContext(stripe, customCheckoutSdk) {\n      setContext(function (ctx) {\n        if (ctx.stripe && ctx.customCheckoutSdk) {\n          return ctx;\n        }\n\n        return {\n          stripe: stripe,\n          customCheckoutSdk: customCheckoutSdk\n        };\n      });\n    }; // Ref used to avoid calling initCustomCheckout multiple times when options changes\n\n\n    var initCustomCheckoutCalledRef = React.useRef(false);\n    React.useEffect(function () {\n      var isMounted = true;\n\n      if (parsed.tag === 'async' && !ctx.stripe) {\n        parsed.stripePromise.then(function (stripe) {\n          if (stripe && isMounted && !initCustomCheckoutCalledRef.current) {\n            // Only update context if the component is still mounted\n            // and stripe is not null. We allow stripe to be null to make\n            // handling SSR easier.\n            initCustomCheckoutCalledRef.current = true;\n            stripe.initCustomCheckout(options).then(function (customCheckoutSdk) {\n              if (customCheckoutSdk) {\n                safeSetContext(stripe, customCheckoutSdk);\n                customCheckoutSdk.on('change', setSession);\n              }\n            });\n          }\n        });\n      } else if (parsed.tag === 'sync' && parsed.stripe && !initCustomCheckoutCalledRef.current) {\n        initCustomCheckoutCalledRef.current = true;\n        parsed.stripe.initCustomCheckout(options).then(function (customCheckoutSdk) {\n          if (customCheckoutSdk) {\n            safeSetContext(parsed.stripe, customCheckoutSdk);\n            customCheckoutSdk.on('change', setSession);\n          }\n        });\n      }\n\n      return function () {\n        isMounted = false;\n      };\n    }, [parsed, ctx, options, setSession]); // Warn on changes to stripe prop\n\n    var prevStripe = usePrevious(rawStripeProp);\n    React.useEffect(function () {\n      if (prevStripe !== null && prevStripe !== rawStripeProp) {\n        console.warn('Unsupported prop change on CustomCheckoutProvider: You cannot change the `stripe` prop after setting it.');\n      }\n    }, [prevStripe, rawStripeProp]); // Apply updates to elements when options prop has relevant changes\n\n    var prevOptions = usePrevious(options);\n    React.useEffect(function () {\n      var _prevOptions$elements, _options$elementsOpti;\n\n      if (!ctx.customCheckoutSdk) {\n        return;\n      }\n\n      if (options.clientSecret && !isUnknownObject(prevOptions) && !isEqual(options.clientSecret, prevOptions.clientSecret)) {\n        console.warn('Unsupported prop change: options.client_secret is not a mutable property.');\n      }\n\n      var previousAppearance = prevOptions === null || prevOptions === void 0 ? void 0 : (_prevOptions$elements = prevOptions.elementsOptions) === null || _prevOptions$elements === void 0 ? void 0 : _prevOptions$elements.appearance;\n      var currentAppearance = options === null || options === void 0 ? void 0 : (_options$elementsOpti = options.elementsOptions) === null || _options$elementsOpti === void 0 ? void 0 : _options$elementsOpti.appearance;\n\n      if (currentAppearance && !isEqual(currentAppearance, previousAppearance)) {\n        ctx.customCheckoutSdk.changeAppearance(currentAppearance);\n      }\n    }, [options, prevOptions, ctx.customCheckoutSdk]); // Attach react-stripe-js version to stripe.js instance\n\n    React.useEffect(function () {\n      registerWithStripeJs(ctx.stripe);\n    }, [ctx.stripe]);\n    var customCheckoutContextValue = React.useMemo(function () {\n      return extractCustomCheckoutContextValue(ctx.customCheckoutSdk, session);\n    }, [ctx.customCheckoutSdk, session]);\n\n    if (!ctx.customCheckoutSdk) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(CustomCheckoutSdkContext.Provider, {\n      value: ctx\n    }, /*#__PURE__*/React.createElement(CustomCheckoutContext.Provider, {\n      value: customCheckoutContextValue\n    }, children));\n  };\n  CustomCheckoutProvider.propTypes = {\n    stripe: propTypes.any,\n    options: propTypes.shape({\n      clientSecret: propTypes.string.isRequired,\n      elementsOptions: propTypes.object\n    }).isRequired\n  };\n  var useCustomCheckoutSdkContextWithUseCase = function useCustomCheckoutSdkContextWithUseCase(useCaseString) {\n    var ctx = React.useContext(CustomCheckoutSdkContext);\n    return parseCustomCheckoutSdkContext(ctx, useCaseString);\n  };\n  var useElementsOrCustomCheckoutSdkContextWithUseCase = function useElementsOrCustomCheckoutSdkContextWithUseCase(useCaseString) {\n    var customCheckoutSdkContext = React.useContext(CustomCheckoutSdkContext);\n    var elementsContext = React.useContext(ElementsContext);\n\n    if (customCheckoutSdkContext && elementsContext) {\n      throw new Error(\"You cannot wrap the part of your app that \".concat(useCaseString, \" in both <CustomCheckoutProvider> and <Elements> providers.\"));\n    }\n\n    if (customCheckoutSdkContext) {\n      return parseCustomCheckoutSdkContext(customCheckoutSdkContext, useCaseString);\n    }\n\n    return parseElementsContext(elementsContext, useCaseString);\n  };\n  var useCustomCheckout = function useCustomCheckout() {\n    // ensure it's in CustomCheckoutProvider\n    useCustomCheckoutSdkContextWithUseCase('calls useCustomCheckout()');\n    var ctx = React.useContext(CustomCheckoutContext);\n\n    if (!ctx) {\n      throw new Error('Could not find CustomCheckout Context; You need to wrap the part of your app that calls useCustomCheckout() in an <CustomCheckoutProvider> provider.');\n    }\n\n    return ctx;\n  };\n\n  var ElementsContext = /*#__PURE__*/React.createContext(null);\n  ElementsContext.displayName = 'ElementsContext';\n  var parseElementsContext = function parseElementsContext(ctx, useCase) {\n    if (!ctx) {\n      throw new Error(\"Could not find Elements context; You need to wrap the part of your app that \".concat(useCase, \" in an <Elements> provider.\"));\n    }\n\n    return ctx;\n  };\n  var CartElementContext = /*#__PURE__*/React.createContext(null);\n  CartElementContext.displayName = 'CartElementContext';\n  var parseCartElementContext = function parseCartElementContext(ctx, useCase) {\n    if (!ctx) {\n      throw new Error(\"Could not find Elements context; You need to wrap the part of your app that \".concat(useCase, \" in an <Elements> provider.\"));\n    }\n\n    return ctx;\n  };\n  /**\n   * The `Elements` provider allows you to use [Element components](https://stripe.com/docs/stripe-js/react#element-components) and access the [Stripe object](https://stripe.com/docs/js/initializing) in any nested component.\n   * Render an `Elements` provider at the root of your React app so that it is available everywhere you need it.\n   *\n   * To use the `Elements` provider, call `loadStripe` from `@stripe/stripe-js` with your publishable key.\n   * The `loadStripe` function will asynchronously load the Stripe.js script and initialize a `Stripe` object.\n   * Pass the returned `Promise` to `Elements`.\n   *\n   * @docs https://stripe.com/docs/stripe-js/react#elements-provider\n   */\n\n  var Elements = function Elements(_ref) {\n    var rawStripeProp = _ref.stripe,\n        options = _ref.options,\n        children = _ref.children;\n    var parsed = React.useMemo(function () {\n      return parseStripeProp(rawStripeProp);\n    }, [rawStripeProp]);\n\n    var _React$useState = React.useState(null),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        cart = _React$useState2[0],\n        setCart = _React$useState2[1];\n\n    var _React$useState3 = React.useState(null),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        cartState = _React$useState4[0],\n        setCartState = _React$useState4[1]; // For a sync stripe instance, initialize into context\n\n\n    var _React$useState5 = React.useState(function () {\n      return {\n        stripe: parsed.tag === 'sync' ? parsed.stripe : null,\n        elements: parsed.tag === 'sync' ? parsed.stripe.elements(options) : null\n      };\n    }),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        ctx = _React$useState6[0],\n        setContext = _React$useState6[1];\n\n    React.useEffect(function () {\n      var isMounted = true;\n\n      var safeSetContext = function safeSetContext(stripe) {\n        setContext(function (ctx) {\n          // no-op if we already have a stripe instance (https://github.com/stripe/react-stripe-js/issues/296)\n          if (ctx.stripe) return ctx;\n          return {\n            stripe: stripe,\n            elements: stripe.elements(options)\n          };\n        });\n      }; // For an async stripePromise, store it in context once resolved\n\n\n      if (parsed.tag === 'async' && !ctx.stripe) {\n        parsed.stripePromise.then(function (stripe) {\n          if (stripe && isMounted) {\n            // Only update Elements context if the component is still mounted\n            // and stripe is not null. We allow stripe to be null to make\n            // handling SSR easier.\n            safeSetContext(stripe);\n          }\n        });\n      } else if (parsed.tag === 'sync' && !ctx.stripe) {\n        // Or, handle a sync stripe instance going from null -> populated\n        safeSetContext(parsed.stripe);\n      }\n\n      return function () {\n        isMounted = false;\n      };\n    }, [parsed, ctx, options]); // Warn on changes to stripe prop\n\n    var prevStripe = usePrevious(rawStripeProp);\n    React.useEffect(function () {\n      if (prevStripe !== null && prevStripe !== rawStripeProp) {\n        console.warn('Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.');\n      }\n    }, [prevStripe, rawStripeProp]); // Apply updates to elements when options prop has relevant changes\n\n    var prevOptions = usePrevious(options);\n    React.useEffect(function () {\n      if (!ctx.elements) {\n        return;\n      }\n\n      var updates = extractAllowedOptionsUpdates(options, prevOptions, ['clientSecret', 'fonts']);\n\n      if (updates) {\n        ctx.elements.update(updates);\n      }\n    }, [options, prevOptions, ctx.elements]); // Attach react-stripe-js version to stripe.js instance\n\n    React.useEffect(function () {\n      registerWithStripeJs(ctx.stripe);\n    }, [ctx.stripe]);\n    return /*#__PURE__*/React.createElement(ElementsContext.Provider, {\n      value: ctx\n    }, /*#__PURE__*/React.createElement(CartElementContext.Provider, {\n      value: {\n        cart: cart,\n        setCart: setCart,\n        cartState: cartState,\n        setCartState: setCartState\n      }\n    }, children));\n  };\n  Elements.propTypes = {\n    stripe: propTypes.any,\n    options: propTypes.object\n  };\n  var useElementsContextWithUseCase = function useElementsContextWithUseCase(useCaseMessage) {\n    var ctx = React.useContext(ElementsContext);\n    return parseElementsContext(ctx, useCaseMessage);\n  };\n  var DUMMY_CART_ELEMENT_CONTEXT = {\n    cart: null,\n    cartState: null,\n    setCart: function setCart() {},\n    setCartState: function setCartState() {}\n  };\n  var useCartElementContextWithUseCase = function useCartElementContextWithUseCase(useCaseMessage) {\n    var isInCustomCheckout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var ctx = React.useContext(CartElementContext);\n\n    if (isInCustomCheckout) {\n      return DUMMY_CART_ELEMENT_CONTEXT;\n    }\n\n    return parseCartElementContext(ctx, useCaseMessage);\n  };\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#useelements-hook\n   */\n\n  var useElements = function useElements() {\n    var _useElementsContextWi = useElementsContextWithUseCase('calls useElements()'),\n        elements = _useElementsContextWi.elements;\n\n    return elements;\n  };\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#usestripe-hook\n   */\n\n  var useStripe = function useStripe() {\n    var _useElementsOrCustomC = useElementsOrCustomCheckoutSdkContextWithUseCase('calls useStripe()'),\n        stripe = _useElementsOrCustomC.stripe;\n\n    return stripe;\n  };\n  /**\n   * @docs https://stripe.com/docs/payments/checkout/cart-element\n   */\n\n  var useCartElement = function useCartElement() {\n    var _useCartElementContex = useCartElementContextWithUseCase('calls useCartElement()'),\n        cart = _useCartElementContex.cart;\n\n    return cart;\n  };\n  /**\n   * @docs https://stripe.com/docs/payments/checkout/cart-element\n   */\n\n  var useCartElementState = function useCartElementState() {\n    var _useCartElementContex2 = useCartElementContextWithUseCase('calls useCartElementState()'),\n        cartState = _useCartElementContex2.cartState;\n\n    return cartState;\n  };\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#elements-consumer\n   */\n\n  var ElementsConsumer = function ElementsConsumer(_ref2) {\n    var children = _ref2.children;\n    var ctx = useElementsContextWithUseCase('mounts <ElementsConsumer>'); // Assert to satisfy the busted React.FC return type (it should be ReactNode)\n\n    return children(ctx);\n  };\n  ElementsConsumer.propTypes = {\n    children: propTypes.func.isRequired\n  };\n\n  var useAttachEvent = function useAttachEvent(element, event, cb) {\n    var cbDefined = !!cb;\n    var cbRef = React.useRef(cb); // In many integrations the callback prop changes on each render.\n    // Using a ref saves us from calling element.on/.off every render.\n\n    React.useEffect(function () {\n      cbRef.current = cb;\n    }, [cb]);\n    React.useEffect(function () {\n      if (!cbDefined || !element) {\n        return function () {};\n      }\n\n      var decoratedCb = function decoratedCb() {\n        if (cbRef.current) {\n          cbRef.current.apply(cbRef, arguments);\n        }\n      };\n\n      element.on(event, decoratedCb);\n      return function () {\n        element.off(event, decoratedCb);\n      };\n    }, [cbDefined, event, element, cbRef]);\n  };\n\n  var capitalized = function capitalized(str) {\n    return str.charAt(0).toUpperCase() + str.slice(1);\n  };\n\n  var createElementComponent = function createElementComponent(type, isServer) {\n    var displayName = \"\".concat(capitalized(type), \"Element\");\n\n    var ClientElement = function ClientElement(_ref) {\n      var id = _ref.id,\n          className = _ref.className,\n          _ref$options = _ref.options,\n          options = _ref$options === void 0 ? {} : _ref$options,\n          onBlur = _ref.onBlur,\n          onFocus = _ref.onFocus,\n          onReady = _ref.onReady,\n          onChange = _ref.onChange,\n          onEscape = _ref.onEscape,\n          onClick = _ref.onClick,\n          onLoadError = _ref.onLoadError,\n          onLoaderStart = _ref.onLoaderStart,\n          onNetworksChange = _ref.onNetworksChange,\n          onCheckout = _ref.onCheckout,\n          onLineItemClick = _ref.onLineItemClick,\n          onConfirm = _ref.onConfirm,\n          onCancel = _ref.onCancel,\n          onShippingAddressChange = _ref.onShippingAddressChange,\n          onShippingRateChange = _ref.onShippingRateChange;\n      var ctx = useElementsOrCustomCheckoutSdkContextWithUseCase(\"mounts <\".concat(displayName, \">\"));\n      var elements = 'elements' in ctx ? ctx.elements : null;\n      var customCheckoutSdk = 'customCheckoutSdk' in ctx ? ctx.customCheckoutSdk : null;\n\n      var _React$useState = React.useState(null),\n          _React$useState2 = _slicedToArray(_React$useState, 2),\n          element = _React$useState2[0],\n          setElement = _React$useState2[1];\n\n      var elementRef = React.useRef(null);\n      var domNode = React.useRef(null);\n\n      var _useCartElementContex = useCartElementContextWithUseCase(\"mounts <\".concat(displayName, \">\"), 'customCheckoutSdk' in ctx),\n          setCart = _useCartElementContex.setCart,\n          setCartState = _useCartElementContex.setCartState; // For every event where the merchant provides a callback, call element.on\n      // with that callback. If the merchant ever changes the callback, removes\n      // the old callback with element.off and then call element.on with the new one.\n\n\n      useAttachEvent(element, 'blur', onBlur);\n      useAttachEvent(element, 'focus', onFocus);\n      useAttachEvent(element, 'escape', onEscape);\n      useAttachEvent(element, 'click', onClick);\n      useAttachEvent(element, 'loaderror', onLoadError);\n      useAttachEvent(element, 'loaderstart', onLoaderStart);\n      useAttachEvent(element, 'networkschange', onNetworksChange);\n      useAttachEvent(element, 'lineitemclick', onLineItemClick);\n      useAttachEvent(element, 'confirm', onConfirm);\n      useAttachEvent(element, 'cancel', onCancel);\n      useAttachEvent(element, 'shippingaddresschange', onShippingAddressChange);\n      useAttachEvent(element, 'shippingratechange', onShippingRateChange);\n      var readyCallback;\n\n      if (type === 'cart') {\n        readyCallback = function readyCallback(event) {\n          setCartState(event);\n          onReady && onReady(event);\n        };\n      } else if (onReady) {\n        if (type === 'expressCheckout') {\n          // Passes through the event, which includes visible PM types\n          readyCallback = onReady;\n        } else {\n          // For other Elements, pass through the Element itself.\n          readyCallback = function readyCallback() {\n            onReady(element);\n          };\n        }\n      }\n\n      useAttachEvent(element, 'ready', readyCallback);\n      var changeCallback = type === 'cart' ? function (event) {\n        setCartState(event);\n        onChange && onChange(event);\n      } : onChange;\n      useAttachEvent(element, 'change', changeCallback);\n      var checkoutCallback = type === 'cart' ? function (event) {\n        setCartState(event);\n        onCheckout && onCheckout(event);\n      } : onCheckout;\n      useAttachEvent(element, 'checkout', checkoutCallback);\n      React.useLayoutEffect(function () {\n        if (elementRef.current === null && domNode.current !== null && (elements || customCheckoutSdk)) {\n          var newElement = null;\n\n          if (customCheckoutSdk) {\n            newElement = customCheckoutSdk.createElement(type, options);\n          } else if (elements) {\n            newElement = elements.create(type, options);\n          }\n\n          if (type === 'cart' && setCart) {\n            // we know that elements.create return value must be of type StripeCartElement if type is 'cart',\n            // we need to cast because typescript is not able to infer which overloaded method is used based off param type\n            setCart(newElement);\n          } // Store element in a ref to ensure it's _immediately_ available in cleanup hooks in StrictMode\n\n\n          elementRef.current = newElement; // Store element in state to facilitate event listener attachment\n\n          setElement(newElement);\n\n          if (newElement) {\n            newElement.mount(domNode.current);\n          }\n        }\n      }, [elements, customCheckoutSdk, options, setCart]);\n      var prevOptions = usePrevious(options);\n      React.useEffect(function () {\n        if (!elementRef.current) {\n          return;\n        }\n\n        var updates = extractAllowedOptionsUpdates(options, prevOptions, ['paymentRequest']);\n\n        if (updates) {\n          elementRef.current.update(updates);\n        }\n      }, [options, prevOptions]);\n      React.useLayoutEffect(function () {\n        return function () {\n          if (elementRef.current && typeof elementRef.current.destroy === 'function') {\n            try {\n              elementRef.current.destroy();\n              elementRef.current = null;\n            } catch (error) {// Do nothing\n            }\n          }\n        };\n      }, []);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: id,\n        className: className,\n        ref: domNode\n      });\n    }; // Only render the Element wrapper in a server environment.\n\n\n    var ServerElement = function ServerElement(props) {\n      // Validate that we are in the right context by calling useElementsContextWithUseCase.\n      var ctx = useElementsOrCustomCheckoutSdkContextWithUseCase(\"mounts <\".concat(displayName, \">\"));\n      useCartElementContextWithUseCase(\"mounts <\".concat(displayName, \">\"), 'customCheckoutSdk' in ctx);\n      var id = props.id,\n          className = props.className;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        id: id,\n        className: className\n      });\n    };\n\n    var Element = isServer ? ServerElement : ClientElement;\n    Element.propTypes = {\n      id: propTypes.string,\n      className: propTypes.string,\n      onChange: propTypes.func,\n      onBlur: propTypes.func,\n      onFocus: propTypes.func,\n      onReady: propTypes.func,\n      onEscape: propTypes.func,\n      onClick: propTypes.func,\n      onLoadError: propTypes.func,\n      onLoaderStart: propTypes.func,\n      onNetworksChange: propTypes.func,\n      onCheckout: propTypes.func,\n      onLineItemClick: propTypes.func,\n      onConfirm: propTypes.func,\n      onCancel: propTypes.func,\n      onShippingAddressChange: propTypes.func,\n      onShippingRateChange: propTypes.func,\n      options: propTypes.object\n    };\n    Element.displayName = displayName;\n    Element.__elementType = type;\n    return Element;\n  };\n\n  var isServer = typeof window === 'undefined';\n\n  var EmbeddedCheckoutContext = /*#__PURE__*/React.createContext(null);\n  EmbeddedCheckoutContext.displayName = 'EmbeddedCheckoutProviderContext';\n  var useEmbeddedCheckoutContext = function useEmbeddedCheckoutContext() {\n    var ctx = React.useContext(EmbeddedCheckoutContext);\n\n    if (!ctx) {\n      throw new Error('<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>');\n    }\n\n    return ctx;\n  };\n  var INVALID_STRIPE_ERROR$2 = 'Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.';\n  var EmbeddedCheckoutProvider = function EmbeddedCheckoutProvider(_ref) {\n    var rawStripeProp = _ref.stripe,\n        options = _ref.options,\n        children = _ref.children;\n    var parsed = React.useMemo(function () {\n      return parseStripeProp(rawStripeProp, INVALID_STRIPE_ERROR$2);\n    }, [rawStripeProp]);\n    var embeddedCheckoutPromise = React.useRef(null);\n    var loadedStripe = React.useRef(null);\n\n    var _React$useState = React.useState({\n      embeddedCheckout: null\n    }),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        ctx = _React$useState2[0],\n        setContext = _React$useState2[1];\n\n    React.useEffect(function () {\n      // Don't support any ctx updates once embeddedCheckout or stripe is set.\n      if (loadedStripe.current || embeddedCheckoutPromise.current) {\n        return;\n      }\n\n      var setStripeAndInitEmbeddedCheckout = function setStripeAndInitEmbeddedCheckout(stripe) {\n        if (loadedStripe.current || embeddedCheckoutPromise.current) return;\n        loadedStripe.current = stripe;\n        embeddedCheckoutPromise.current = loadedStripe.current.initEmbeddedCheckout(options).then(function (embeddedCheckout) {\n          setContext({\n            embeddedCheckout: embeddedCheckout\n          });\n        });\n      }; // For an async stripePromise, store it once resolved\n\n\n      if (parsed.tag === 'async' && !loadedStripe.current && options.clientSecret) {\n        parsed.stripePromise.then(function (stripe) {\n          if (stripe) {\n            setStripeAndInitEmbeddedCheckout(stripe);\n          }\n        });\n      } else if (parsed.tag === 'sync' && !loadedStripe.current && options.clientSecret) {\n        // Or, handle a sync stripe instance going from null -> populated\n        setStripeAndInitEmbeddedCheckout(parsed.stripe);\n      }\n    }, [parsed, options, ctx, loadedStripe]);\n    React.useEffect(function () {\n      // cleanup on unmount\n      return function () {\n        // If embedded checkout is fully initialized, destroy it.\n        if (ctx.embeddedCheckout) {\n          embeddedCheckoutPromise.current = null;\n          ctx.embeddedCheckout.destroy();\n        } else if (embeddedCheckoutPromise.current) {\n          // If embedded checkout is still initializing, destroy it once\n          // it's done. This could be caused by unmounting very quickly\n          // after mounting.\n          embeddedCheckoutPromise.current.then(function () {\n            embeddedCheckoutPromise.current = null;\n\n            if (ctx.embeddedCheckout) {\n              ctx.embeddedCheckout.destroy();\n            }\n          });\n        }\n      };\n    }, [ctx.embeddedCheckout]); // Attach react-stripe-js version to stripe.js instance\n\n    React.useEffect(function () {\n      registerWithStripeJs(loadedStripe);\n    }, [loadedStripe]); // Warn on changes to stripe prop.\n    // The stripe prop value can only go from null to non-null once and\n    // can't be changed after that.\n\n    var prevStripe = usePrevious(rawStripeProp);\n    React.useEffect(function () {\n      if (prevStripe !== null && prevStripe !== rawStripeProp) {\n        console.warn('Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.');\n      }\n    }, [prevStripe, rawStripeProp]); // Warn on changes to options.\n\n    var prevOptions = usePrevious(options);\n    React.useEffect(function () {\n      if (prevOptions == null) {\n        return;\n      }\n\n      if (options == null) {\n        console.warn('Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them.');\n        return;\n      }\n\n      if (prevOptions.clientSecret != null && options.clientSecret !== prevOptions.clientSecret) {\n        console.warn('Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead.');\n      }\n\n      if (prevOptions.onComplete != null && options.onComplete !== prevOptions.onComplete) {\n        console.warn('Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it.');\n      }\n    }, [prevOptions, options]);\n    return /*#__PURE__*/React.createElement(EmbeddedCheckoutContext.Provider, {\n      value: ctx\n    }, children);\n  };\n\n  var EmbeddedCheckoutClientElement = function EmbeddedCheckoutClientElement(_ref) {\n    var id = _ref.id,\n        className = _ref.className;\n\n    var _useEmbeddedCheckoutC = useEmbeddedCheckoutContext(),\n        embeddedCheckout = _useEmbeddedCheckoutC.embeddedCheckout;\n\n    var isMounted = React.useRef(false);\n    var domNode = React.useRef(null);\n    React.useLayoutEffect(function () {\n      if (!isMounted.current && embeddedCheckout && domNode.current !== null) {\n        embeddedCheckout.mount(domNode.current);\n        isMounted.current = true;\n      } // Clean up on unmount\n\n\n      return function () {\n        if (isMounted.current && embeddedCheckout) {\n          try {\n            embeddedCheckout.unmount();\n            isMounted.current = false;\n          } catch (e) {// Do nothing.\n            // Parent effects are destroyed before child effects, so\n            // in cases where both the EmbeddedCheckoutProvider and\n            // the EmbeddedCheckout component are removed at the same\n            // time, the embeddedCheckout instance will be destroyed,\n            // which causes an error when calling unmount.\n          }\n        }\n      };\n    }, [embeddedCheckout]);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      ref: domNode,\n      id: id,\n      className: className\n    });\n  }; // Only render the wrapper in a server environment.\n\n\n  var EmbeddedCheckoutServerElement = function EmbeddedCheckoutServerElement(_ref2) {\n    var id = _ref2.id,\n        className = _ref2.className;\n    // Validate that we are in the right context by calling useEmbeddedCheckoutContext.\n    useEmbeddedCheckoutContext();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: id,\n      className: className\n    });\n  };\n\n  var EmbeddedCheckout = isServer ? EmbeddedCheckoutServerElement : EmbeddedCheckoutClientElement;\n\n  /**\n   * Requires beta access:\n   * Contact [Stripe support](https://support.stripe.com/) for more information.\n   *\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var AuBankAccountElement = createElementComponent('auBankAccount', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var CardElement = createElementComponent('card', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var CardNumberElement = createElementComponent('cardNumber', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var CardExpiryElement = createElementComponent('cardExpiry', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var CardCvcElement = createElementComponent('cardCvc', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var FpxBankElement = createElementComponent('fpxBank', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var IbanElement = createElementComponent('iban', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var IdealBankElement = createElementComponent('idealBank', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var P24BankElement = createElementComponent('p24Bank', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var EpsBankElement = createElementComponent('epsBank', isServer);\n  var PaymentElement = createElementComponent('payment', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var ExpressCheckoutElement = createElementComponent('expressCheckout', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var PaymentRequestButtonElement = createElementComponent('paymentRequestButton', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var LinkAuthenticationElement = createElementComponent('linkAuthentication', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var AddressElement = createElementComponent('address', isServer);\n  /**\n   * @deprecated\n   * Use `AddressElement` instead.\n   *\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var ShippingAddressElement = createElementComponent('shippingAddress', isServer);\n  /**\n   * Requires beta access:\n   * Contact [Stripe support](https://support.stripe.com/) for more information.\n   *\n   * @docs https://stripe.com/docs/elements/cart-element\n   */\n\n  var CartElement = createElementComponent('cart', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var PaymentMethodMessagingElement = createElementComponent('paymentMethodMessaging', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var AffirmMessageElement = createElementComponent('affirmMessage', isServer);\n  /**\n   * @docs https://stripe.com/docs/stripe-js/react#element-components\n   */\n\n  var AfterpayClearpayMessageElement = createElementComponent('afterpayClearpayMessage', isServer);\n\n  exports.AddressElement = AddressElement;\n  exports.AffirmMessageElement = AffirmMessageElement;\n  exports.AfterpayClearpayMessageElement = AfterpayClearpayMessageElement;\n  exports.AuBankAccountElement = AuBankAccountElement;\n  exports.CardCvcElement = CardCvcElement;\n  exports.CardElement = CardElement;\n  exports.CardExpiryElement = CardExpiryElement;\n  exports.CardNumberElement = CardNumberElement;\n  exports.CartElement = CartElement;\n  exports.CustomCheckoutProvider = CustomCheckoutProvider;\n  exports.Elements = Elements;\n  exports.ElementsConsumer = ElementsConsumer;\n  exports.EmbeddedCheckout = EmbeddedCheckout;\n  exports.EmbeddedCheckoutProvider = EmbeddedCheckoutProvider;\n  exports.EpsBankElement = EpsBankElement;\n  exports.ExpressCheckoutElement = ExpressCheckoutElement;\n  exports.FpxBankElement = FpxBankElement;\n  exports.IbanElement = IbanElement;\n  exports.IdealBankElement = IdealBankElement;\n  exports.LinkAuthenticationElement = LinkAuthenticationElement;\n  exports.P24BankElement = P24BankElement;\n  exports.PaymentElement = PaymentElement;\n  exports.PaymentMethodMessagingElement = PaymentMethodMessagingElement;\n  exports.PaymentRequestButtonElement = PaymentRequestButtonElement;\n  exports.ShippingAddressElement = ShippingAddressElement;\n  exports.useCartElement = useCartElement;\n  exports.useCartElementState = useCartElementState;\n  exports.useCustomCheckout = useCustomCheckout;\n  exports.useElements = useElements;\n  exports.useStripe = useStripe;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","var V3_URL = 'https://js.stripe.com/v3';\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(V3_URL, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!V3_URL_REGEX.test(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(V3_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"1.54.1\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise = null;\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise !== null) {\n    return stripePromise;\n  }\n\n  stripePromise = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      }\n\n      script.addEventListener('load', function () {\n        if (window.Stripe) {\n          resolve(window.Stripe);\n        } else {\n          reject(new Error('Stripe.js not available'));\n        }\n      });\n      script.addEventListener('error', function () {\n        reject(new Error('Failed to load Stripe.js'));\n      });\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  });\n  return stripePromise;\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\n// own script injection.\n\nvar stripePromise$1 = Promise.resolve().then(function () {\n  return loadScript(null);\n});\nvar loadCalled = false;\nstripePromise$1[\"catch\"](function (err) {\n  if (!loadCalled) {\n    console.warn(err);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now();\n  return stripePromise$1.then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","\"use strict\";\n\nvar _require = require('./Component'),\n    CopyToClipboard = _require.CopyToClipboard;\n\nCopyToClipboard.CopyToClipboard = CopyToClipboard;\nmodule.exports = CopyToClipboard;","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CopyToClipboard = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _copyToClipboard = _interopRequireDefault(require(\"copy-to-clipboard\"));\n\nvar _excluded = [\"text\", \"onCopy\", \"options\", \"children\"];\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar CopyToClipboard = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(CopyToClipboard, _React$PureComponent);\n\n  var _super = _createSuper(CopyToClipboard);\n\n  function CopyToClipboard() {\n    var _this;\n\n    _classCallCheck(this, CopyToClipboard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function (event) {\n      var _this$props = _this.props,\n          text = _this$props.text,\n          onCopy = _this$props.onCopy,\n          children = _this$props.children,\n          options = _this$props.options;\n\n      var elem = _react[\"default\"].Children.only(children);\n\n      var result = (0, _copyToClipboard[\"default\"])(text, options);\n\n      if (onCopy) {\n        onCopy(text, result);\n      } // Bypass onClick if it was present\n\n\n      if (elem && elem.props && typeof elem.props.onClick === 'function') {\n        elem.props.onClick(event);\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(CopyToClipboard, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          _text = _this$props2.text,\n          _onCopy = _this$props2.onCopy,\n          _options = _this$props2.options,\n          children = _this$props2.children,\n          props = _objectWithoutProperties(_this$props2, _excluded);\n\n      var elem = _react[\"default\"].Children.only(children);\n\n      return /*#__PURE__*/_react[\"default\"].cloneElement(elem, _objectSpread(_objectSpread({}, props), {}, {\n        onClick: this.onClick\n      }));\n    }\n  }]);\n\n  return CopyToClipboard;\n}(_react[\"default\"].PureComponent);\n\nexports.CopyToClipboard = CopyToClipboard;\n\n_defineProperty(CopyToClipboard, \"defaultProps\", {\n  onCopy: undefined,\n  options: undefined\n});","\"use strict\";\n\nvar deselectCurrent = require(\"toggle-selection\");\n\nvar clipboardToIE11Formatting = {\n  \"text/plain\": \"Text\",\n  \"text/html\": \"Url\",\n  \"default\": \"Text\"\n}\n\nvar defaultMessage = \"Copy to clipboard: #{key}, Enter\";\n\nfunction format(message) {\n  var copyKey = (/mac os x/i.test(navigator.userAgent) ? \"\" : \"Ctrl\") + \"+C\";\n  return message.replace(/#{\\s*key\\s*}/g, copyKey);\n}\n\nfunction copy(text, options) {\n  var debug,\n    message,\n    reselectPrevious,\n    range,\n    selection,\n    mark,\n    success = false;\n  if (!options) {\n    options = {};\n  }\n  debug = options.debug || false;\n  try {\n    reselectPrevious = deselectCurrent();\n\n    range = document.createRange();\n    selection = document.getSelection();\n\n    mark = document.createElement(\"span\");\n    mark.textContent = text;\n    // avoid screen readers from reading out loud the text\n    mark.ariaHidden = \"true\"\n    // reset user styles for span element\n    mark.style.all = \"unset\";\n    // prevents scrolling to the end of the page\n    mark.style.position = \"fixed\";\n    mark.style.top = 0;\n    mark.style.clip = \"rect(0, 0, 0, 0)\";\n    // used to preserve spaces and line breaks\n    mark.style.whiteSpace = \"pre\";\n    // do not inherit user-select (it may be `none`)\n    mark.style.webkitUserSelect = \"text\";\n    mark.style.MozUserSelect = \"text\";\n    mark.style.msUserSelect = \"text\";\n    mark.style.userSelect = \"text\";\n    mark.addEventListener(\"copy\", function(e) {\n      e.stopPropagation();\n      if (options.format) {\n        e.preventDefault();\n        if (typeof e.clipboardData === \"undefined\") { // IE 11\n          debug && console.warn(\"unable to use e.clipboardData\");\n          debug && console.warn(\"trying IE specific stuff\");\n          window.clipboardData.clearData();\n          var format = clipboardToIE11Formatting[options.format] || clipboardToIE11Formatting[\"default\"]\n          window.clipboardData.setData(format, text);\n        } else { // all other browsers\n          e.clipboardData.clearData();\n          e.clipboardData.setData(options.format, text);\n        }\n      }\n      if (options.onCopy) {\n        e.preventDefault();\n        options.onCopy(e.clipboardData);\n      }\n    });\n\n    document.body.appendChild(mark);\n\n    range.selectNodeContents(mark);\n    selection.addRange(range);\n\n    var successful = document.execCommand(\"copy\");\n    if (!successful) {\n      throw new Error(\"copy command was unsuccessful\");\n    }\n    success = true;\n  } catch (err) {\n    debug && console.error(\"unable to copy using execCommand: \", err);\n    debug && console.warn(\"trying IE specific stuff\");\n    try {\n      window.clipboardData.setData(options.format || \"text\", text);\n      options.onCopy && options.onCopy(window.clipboardData);\n      success = true;\n    } catch (err) {\n      debug && console.error(\"unable to copy using clipboardData: \", err);\n      debug && console.error(\"falling back to prompt\");\n      message = format(\"message\" in options ? options.message : defaultMessage);\n      window.prompt(message, text);\n    }\n  } finally {\n    if (selection) {\n      if (typeof selection.removeRange == \"function\") {\n        selection.removeRange(range);\n      } else {\n        selection.removeAllRanges();\n      }\n    }\n\n    if (mark) {\n      document.body.removeChild(mark);\n    }\n    reselectPrevious();\n  }\n\n  return success;\n}\n\nmodule.exports = copy;\n","\nmodule.exports = function () {\n  var selection = document.getSelection();\n  if (!selection.rangeCount) {\n    return function () {};\n  }\n  var active = document.activeElement;\n\n  var ranges = [];\n  for (var i = 0; i < selection.rangeCount; i++) {\n    ranges.push(selection.getRangeAt(i));\n  }\n\n  switch (active.tagName.toUpperCase()) { // .toUpperCase handles XHTML\n    case 'INPUT':\n    case 'TEXTAREA':\n      active.blur();\n      break;\n\n    default:\n      active = null;\n      break;\n  }\n\n  selection.removeAllRanges();\n  return function () {\n    selection.type === 'Caret' &&\n    selection.removeAllRanges();\n\n    if (!selection.rangeCount) {\n      ranges.forEach(function(range) {\n        selection.addRange(range);\n      });\n    }\n\n    active &&\n    active.focus();\n  };\n};\n","import GenericDestructiveModal from 'components/modals/generic/generic_destructive_modal'\r\nimport { useSubscription } from 'context/useSubscription'\r\nimport React from 'react'\r\nimport { logClick } from 'utils/analytics'\r\nimport { isDev } from 'utils/env'\r\n\r\ninterface IModalComponentProps {\r\n  modalIsOpen: boolean\r\n  closeModal: () => void\r\n}\r\n\r\nexport const CancelPaypalSubscriptionModal = ({ closeModal, modalIsOpen }: IModalComponentProps) => {\r\n  const { subscription } = useSubscription()\r\n\r\n  const handleClick = () => {\r\n    window.location.replace(\r\n      `https://www.${isDev ? 'sandbox.' : ''}paypal.com/myaccount/autopay/connect/${\r\n        subscription.subscriptionId\r\n      }`\r\n    )\r\n    logClick('CancelPaypalSubscription')\r\n  }\r\n\r\n  return (\r\n    <GenericDestructiveModal\r\n      isOpen={modalIsOpen}\r\n      closeModal={closeModal}\r\n      onConfirm={handleClick}\r\n      headerText={`Cancel Subscription?`}\r\n      confirmText={`Cancel Subscription`}\r\n    >\r\n      <p>We'll be sad to see you go, but you're always welcome back!</p>\r\n      <p>You'll still have access to everything until your current subscription expires.</p>\r\n      <p>\r\n        <small>\r\n          You will be redirected to cancel your subscription using the PayPal interface for extra security.\r\n          The change in your subscription may not be reflected for up to five minutes.\r\n        </small>\r\n      </p>\r\n    </GenericDestructiveModal>\r\n  )\r\n}\r\n","import GenericDestructiveModal from 'components/modals/generic/generic_destructive_modal'\r\nimport { useSubscription } from 'context/useSubscription'\r\nimport React from 'react'\r\nimport { logClick } from 'utils/analytics'\r\n\r\ninterface IModalComponentProps {\r\n  modalIsOpen: boolean\r\n  closeModal: () => void\r\n}\r\n\r\nexport const CancelStripeSubscriptionModal = (props: IModalComponentProps) => {\r\n  const { closeModal, modalIsOpen } = props\r\n  const { cancelSubscription } = useSubscription()\r\n\r\n  const handleClick = async () => {\r\n    await cancelSubscription()\r\n    logClick('CancelSubscription')\r\n  }\r\n\r\n  return (\r\n    <GenericDestructiveModal\r\n      isOpen={modalIsOpen}\r\n      closeModal={closeModal}\r\n      onConfirmAsync={handleClick}\r\n      headerText={`Cancel Subscription?`}\r\n      confirmText={`Cancel Subscription`}\r\n    >\r\n      <p>We'll be sad to see you go, but you're always welcome back!</p>\r\n      <p>You'll still have access to everything until your current subscription expires.</p>\r\n    </GenericDestructiveModal>\r\n  )\r\n}\r\n","import { useAuth0 } from '@auth0/auth0-react'\r\nimport { Elements, useStripe } from '@stripe/react-stripe-js'\r\nimport { loadStripe } from '@stripe/stripe-js'\r\nimport GenericButton from 'components/input/generic_button'\r\nimport { useSubscription } from 'context/useSubscription'\r\nimport { useTheme } from 'context/useTheme'\r\nimport { capitalize } from 'lodash'\r\nimport qs from 'qs'\r\nimport React, { useState } from 'react'\r\nimport CopyToClipboard from 'react-copy-to-clipboard'\r\nimport { FaCheck, FaGift, FaRegSmileBeam } from 'react-icons/fa'\r\nimport { centerContentClass } from 'theme/helperClasses'\r\nimport { IGiftSubscription } from 'types/subscription'\r\nimport { logClick } from 'utils/analytics'\r\nimport { isDev, STRIPE_KEY } from 'utils/env'\r\nimport useLogin from 'utils/hooks/useLogin'\r\nimport useWindowSize from 'utils/hooks/useWindowSize'\r\nimport { GiftedSubscriptionPlans, IGiftedSubscriptionPlans } from 'utils/plans'\r\n\r\nconst COL_SIZE = `col-12 col-sm-12 col-md-10 col-xl-8 col-xxl-6`\r\n\r\nconst GiftSubscriptionsComponent = () => {\r\n  const stripe = useStripe()\r\n  const { isActive } = useSubscription()\r\n\r\n  if (!stripe || !isActive) return <></>\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <GiftTable />\r\n      <PlansHeader />\r\n      <PurchaseTable />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst GiftTable = () => {\r\n  const { theme, isDark } = useTheme()\r\n  const { subscription } = useSubscription()\r\n  const { isMobile } = useWindowSize()\r\n  const { giftSubscriptions = [] } = subscription\r\n\r\n  const border = `border border-${isDark ? `dark` : `light-gray`} rounded`\r\n\r\n  if (giftSubscriptions.length === 0) return null\r\n\r\n  const purchasedSubs = giftSubscriptions.filter(x => x.origin === 'stripe')\r\n  const adminCreatedSubs = giftSubscriptions.filter(x => x.origin !== 'stripe')\r\n\r\n  const rowClass = `row d-flex justify-content-center text-center ${theme.text} mx-1`\r\n\r\n  return (\r\n    <>\r\n      <div className={`row d-flex justify-content-center pb-5 ${theme.text}`}>\r\n        <div className={`${COL_SIZE} ${border} py-3`}>\r\n          <div className={rowClass}>\r\n            <div className=\"col-12\">\r\n              <h4>Your Gift Subscriptions</h4>\r\n            </div>\r\n            <div className=\"col-12\">\r\n              <p>Click to copy a one-time-use link and send it to your friend.</p>\r\n            </div>\r\n          </div>\r\n\r\n          {purchasedSubs.length > 0 && (\r\n            <div className={rowClass}>\r\n              <div className={`${theme.text}`}>\r\n                {purchasedSubs.map((x, i) => (\r\n                  <GiftButton {...x} key={i} />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {purchasedSubs.length > 0 && adminCreatedSubs.length > 0 && <hr />}\r\n\r\n          {adminCreatedSubs.length > 0 && (\r\n            <>\r\n              <div className={rowClass}>\r\n                <p className={`mb-1 ${theme.text} ${centerContentClass}`}>\r\n                  These gifts were given to you by the AoS Reminders team. Spread them around!\r\n                  {isMobile ? `` : <FaRegSmileBeam className=\"ml-2\" />}\r\n                </p>\r\n              </div>\r\n              <div className={rowClass}>\r\n                {adminCreatedSubs.map((x, i) => (\r\n                  <GiftButton {...x} key={i} />\r\n                ))}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst GiftButton = (props: IGiftSubscription) => {\r\n  const { planInterval, planIntervalCount } = props\r\n  const { theme } = useTheme()\r\n  const { isMobile } = useWindowSize()\r\n  const [copied, setCopied] = useState(false)\r\n\r\n  const label = `${planIntervalCount} ${capitalize(planInterval)}${planIntervalCount > 1 ? `s` : ``}`\r\n\r\n  const handleCopy = () => {\r\n    logClick(`Copy-Gift-URL-${label}`)\r\n    setCopied(true)\r\n    setTimeout(() => setCopied(false), 2500)\r\n  }\r\n\r\n  return (\r\n    <CopyToClipboard onCopy={handleCopy} text={props.url}>\r\n      <GenericButton className={`${theme.genericButton} mx-2 my-2`}>\r\n        <FaGift className=\"mr-2\" />\r\n        <strong className=\"mr-1\">{label}</strong>\r\n        {isMobile ? `` : ` Gift`}\r\n        {copied && <FaCheck className={`text-success ml-2`} />}\r\n      </GenericButton>\r\n    </CopyToClipboard>\r\n  )\r\n}\r\n\r\nconst PurchaseTable = () => {\r\n  const { theme } = useTheme()\r\n  const { isMobile } = useWindowSize()\r\n\r\n  return (\r\n    <>\r\n      <div className={`row d-flex justify-content-center`}>\r\n        <div className={`${COL_SIZE}`}>\r\n          <table className={`table ${theme.text} ${isMobile ? `table-sm` : ``}`}>\r\n            <thead>\r\n              <tr>\r\n                <th>Plan</th>\r\n                <th>{isMobile ? `#` : `Quantity`}</th>\r\n                <th>Cost</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {GiftedSubscriptionPlans.map((plan, i) => (\r\n                <PlanComponent supportPlan={plan} key={i} />\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n          <div className={`row text-center justify-content-center ${theme.text} pb-5`}>\r\n            <div className=\"col\">\r\n              <small>\r\n                <em>\r\n                  Gifted subscriptions are <strong>not</strong> recurring charges. You only pay for the\r\n                  initial subscription period.\r\n                  <br />\r\n                  You will receive an activation link that you can send to anyone. They will set up their\r\n                  account using that link.\r\n                </em>\r\n              </small>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst PlansHeader = () => {\r\n  const { theme } = useTheme()\r\n  return (\r\n    <div className={`col-12 text-center mb-3 ${theme.text}`}>\r\n      <h4>Gift a Subscription!</h4>\r\n    </div>\r\n  )\r\n}\r\n\r\ninterface IPlanProps {\r\n  supportPlan: IGiftedSubscriptionPlans\r\n}\r\n\r\nconst PlanComponent = ({ supportPlan }: IPlanProps) => {\r\n  const origin = `${supportPlan.title}-GiftedSubscription`\r\n  const { user, isAuthenticated } = useAuth0()\r\n  const { login } = useLogin({ origin })\r\n  const stripe = useStripe()\r\n  const { isMobile } = useWindowSize()\r\n  const [quantity, setQuantity] = useState(1)\r\n\r\n  if (!stripe || !user) return null\r\n\r\n  // When the customer clicks on the button, redirect them to Checkout.\r\n  const handleCheckout = async (e: React.MouseEvent) => {\r\n    e.preventDefault()\r\n\r\n    if (quantity === 0) return // Can't do anything with zero quantity\r\n\r\n    logClick(origin)\r\n\r\n    const price = isDev ? supportPlan.stripe_dev : supportPlan.stripe_prod\r\n    const url = isDev ? 'localhost:3000' : 'aosreminders.com'\r\n\r\n    const item = { price, quantity: typeof quantity === 'string' ? parseInt(quantity) : quantity }\r\n\r\n    stripe\r\n      .redirectToCheckout({\r\n        mode: 'payment',\r\n        lineItems: [item],\r\n\r\n        // Meta\r\n        customerEmail: user.email, // Used to prefill checkout\r\n        clientReferenceId: user.email, // Included in the checkout.session.completed webhook\r\n\r\n        // Redirect after checkout\r\n        successUrl: `${window.location.protocol}//${url}/profile?${qs.stringify({\r\n          gifted: true,\r\n          quantity,\r\n          plan: supportPlan.title,\r\n        })}`,\r\n        cancelUrl: `${window.location.protocol}//${url}?${qs.stringify({\r\n          canceled: true,\r\n          plan: supportPlan.title,\r\n        })}`,\r\n      })\r\n      .then(function (result) {\r\n        if (result.error) {\r\n          // If `redirectToCheckout` fails due to a browser or network\r\n          // error, display the localized error message to your customer.\r\n          console.log(result.error)\r\n          // var displayError = document.getElementById('error-message');\r\n          // displayError.textContent = result.error.message;\r\n        }\r\n      })\r\n  }\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.value\r\n    setQuantity(parseInt(value, 10))\r\n  }\r\n\r\n  return (\r\n    <tr>\r\n      <td>\r\n        <strong>{supportPlan.title}</strong>\r\n      </td>\r\n      <td>\r\n        <input\r\n          style={{ maxWidth: '60px' }}\r\n          className=\"form-control\"\r\n          type=\"number\"\r\n          value={quantity}\r\n          onChange={handleChange}\r\n        />\r\n      </td>\r\n\r\n      <td>${(parseFloat(supportPlan.cost) * quantity).toFixed(2)}</td>\r\n\r\n      <td>\r\n        <GenericButton\r\n          className={`btn btn ${isMobile ? `btn-sm` : ``} btn-block btn-primary`}\r\n          onClick={isAuthenticated ? handleCheckout : login}\r\n        >\r\n          {isMobile ? `Buy` : `Purchase`}\r\n        </GenericButton>\r\n      </td>\r\n    </tr>\r\n  )\r\n}\r\n\r\nconst stripePromise = loadStripe(STRIPE_KEY)\r\n\r\nexport const GiftSubscriptions = () => {\r\n  return (\r\n    <Elements stripe={stripePromise}>\r\n      <GiftSubscriptionsComponent />\r\n    </Elements>\r\n  )\r\n}\r\n","import { useAuth0 } from '@auth0/auth0-react'\r\nimport { LoadingBody, LoadingHeader } from 'components/helpers/suspenseFallbacks'\r\nimport GenericButton from 'components/input/generic_button'\r\nimport { CancelPaypalSubscriptionModal } from 'components/modals/paypal_cancellation_modal'\r\nimport { CancelStripeSubscriptionModal } from 'components/modals/stripe_cancellation_modal'\r\nimport Contact from 'components/page/contact'\r\nimport { GiftSubscriptions } from 'components/payment/giftSubscriptions'\r\nimport { useSubscription } from 'context/useSubscription'\r\nimport { useTheme } from 'context/useTheme'\r\nimport { DateTime } from 'luxon'\r\nimport { lazy, Suspense, useEffect, useState } from 'react'\r\nimport { FaGift, FaPaypal, FaSearchDollar } from 'react-icons/fa'\r\nimport { MdCheckCircle, MdNotInterested } from 'react-icons/md'\r\nimport { Link } from 'react-router-dom'\r\nimport Switch from 'react-switch'\r\nimport { centerContentClass } from 'theme/helperClasses'\r\nimport { logClick, logPageView } from 'utils/analytics'\r\nimport { ROUTES } from 'utils/env'\r\nimport { titleCase } from 'utils/textUtils'\r\n\r\nconst Navbar = lazy(() => import('components/page/navbar'))\r\n\r\nconst Profile = () => {\r\n  const { isLoading, user } = useAuth0()\r\n  const { getSubscription } = useSubscription()\r\n  const { theme } = useTheme()\r\n\r\n  useEffect(() => {\r\n    logPageView()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    getSubscription()\r\n  }, [getSubscription])\r\n\r\n  if (isLoading || !user) return <LoadingBody />\r\n\r\n  const userCardWrapperClass = `col-12 col-md-8 col-lg-6 col-xl-6`\r\n\r\n  return (\r\n    <div className={`d-block ${theme.bgColor}`}>\r\n      <div className={`${theme.headerColor} py-2`}>\r\n        <Suspense fallback={<LoadingHeader />}>\r\n          <Navbar />\r\n        </Suspense>\r\n      </div>\r\n\r\n      <div className={`container ${theme.bgColor} px-0`}>\r\n        <div className=\"row d-flex justify-content-center\">\r\n          <div className={userCardWrapperClass}>\r\n            <UserCard />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <GiftSubscriptions />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Profile\r\n\r\nconst UserCard = () => {\r\n  const { isSubscribed, subscription } = useSubscription()\r\n  const { theme } = useTheme()\r\n\r\n  return (\r\n    <div className={`col py-4 ${theme.text} text-center`}>\r\n      <h1 className=\"text-center\">Your Profile</h1>\r\n      <ToggleTheme />\r\n      <SubscriptionInfo />\r\n      {isSubscribed && subscription.subscriptionStatus !== 'temporary_grant' && <RecurringPaymentInfo />}\r\n      <EmailVerified />\r\n      <Help />\r\n    </div>\r\n  )\r\n}\r\n\r\nconst CancelBtn = () => {\r\n  const { isActive, isCanceled, createdByPaypal } = useSubscription()\r\n  const { isLight } = useTheme()\r\n\r\n  const [modalIsOpen, setModalIsOpen] = useState(false)\r\n\r\n  const openModal = () => setModalIsOpen(true)\r\n  const closeModal = () => setModalIsOpen(false)\r\n\r\n  if (!isActive || isCanceled) return <></>\r\n\r\n  const btnClass = `btn btn-sm btn${isLight ? `-outline-` : `-`}danger`\r\n\r\n  const ModelComponent = createdByPaypal ? CancelPaypalSubscriptionModal : CancelStripeSubscriptionModal\r\n\r\n  return (\r\n    <>\r\n      <GenericButton className={btnClass} onClick={openModal}>\r\n        Cancel Subscription\r\n      </GenericButton>\r\n      {modalIsOpen && <ModelComponent modalIsOpen={modalIsOpen} closeModal={closeModal} />}\r\n    </>\r\n  )\r\n}\r\n\r\nconst SubscriptionInfo = () => {\r\n  const { hasActiveGrant, hasExpiredGrant, isActive, isPending, isSubscribed, subscription } =\r\n    useSubscription()\r\n  const { theme } = useTheme()\r\n\r\n  if (hasActiveGrant) return <TemporaryGrantComponent />\r\n\r\n  return (\r\n    <div className={`${theme.card} mt-2`}>\r\n      <div className={theme.profileCardHeader}>\r\n        <h4>\r\n          <div className={centerContentClass}>\r\n            Subscription Status:{' '}\r\n            {isActive ? (\r\n              <MdCheckCircle className=\"text-success ml-2\" />\r\n            ) : (\r\n              <MdNotInterested className=\"text-danger ml-2\" />\r\n            )}\r\n          </div>\r\n        </h4>\r\n      </div>\r\n\r\n      {isActive && !hasExpiredGrant && (\r\n        <div className={theme.cardBody}>\r\n          <h5 className=\"lead\">\r\n            Subscription Start:{' '}\r\n            {DateTime.fromSeconds(subscription.subscriptionStart as number).toLocaleString(DateTime.DATE_MED)}\r\n          </h5>\r\n          <h5 className=\"lead\">\r\n            Subscription End:{' '}\r\n            {DateTime.fromSeconds(subscription.subscriptionStart as number)\r\n              .plus({\r\n                [`${subscription.planInterval}s`]: subscription.planIntervalCount,\r\n              })\r\n              .toLocaleString(DateTime.DATE_MED)}\r\n          </h5>\r\n          {subscription.createdBy &&\r\n            (subscription.createdBy === 'paypal' || subscription.createdBy === 'stripe') && (\r\n              <h5 className=\"lead\">Payment Method: {titleCase(subscription.createdBy)}</h5>\r\n            )}\r\n        </div>\r\n      )}\r\n      {isSubscribed && !isActive && !isPending && !hasExpiredGrant && (\r\n        <div className={theme.cardBody}>\r\n          <SubscriptionExpired />\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst TemporaryGrantComponent = () => {\r\n  const { subscription } = useSubscription()\r\n  const { theme } = useTheme()\r\n\r\n  return (\r\n    <div className={`${theme.card} mt-2`}>\r\n      <div className={theme.profileCardHeader}>\r\n        <h4>\r\n          <div className={centerContentClass}>\r\n            Subscription Status: <FaSearchDollar className=\"text-warning ml-2\" />\r\n          </div>\r\n        </h4>\r\n      </div>\r\n\r\n      <div className={theme.cardBody}>\r\n        <div className={`${centerContentClass} row`}>\r\n          <div className=\"col-12\">\r\n            <h1>\r\n              <FaPaypal className=\"text-info ml-2 align-self-center\" />\r\n            </h1>\r\n          </div>\r\n          <div className=\"col-12\">\r\n            <h5 className=\"text-warning\">Currently verifying payment via Paypal.</h5>\r\n          </div>\r\n        </div>\r\n\r\n        <h5 className=\"lead\">\r\n          Subscription Start:{' '}\r\n          {DateTime.fromSeconds(subscription.subscriptionStart as number).toLocaleString(DateTime.DATE_MED)}\r\n        </h5>\r\n        <h5 className=\"lead\">\r\n          Subscription End:{' '}\r\n          {DateTime.fromSeconds(subscription.subscriptionStart as number)\r\n            .plus({\r\n              [`${subscription.planInterval}s`]: subscription.planIntervalCount,\r\n            })\r\n            .toLocaleString(DateTime.DATE_MED)}\r\n        </h5>\r\n        <h5 className=\"lead\">Payment Method: Paypal</h5>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst RecurringPaymentInfo = () => {\r\n  const { isActive, isCanceled, isGifted } = useSubscription()\r\n  const { theme } = useTheme()\r\n  return (\r\n    <div className={`${theme.card} mt-2`}>\r\n      <div className={theme.profileCardHeader}>\r\n        <h4>\r\n          <div className={centerContentClass}>\r\n            Recurring Payment:{' '}\r\n            {isActive && !isCanceled ? (\r\n              <MdCheckCircle className=\"text-success ml-2\" />\r\n            ) : (\r\n              <MdNotInterested className=\"text-danger ml-2\" />\r\n            )}\r\n          </div>\r\n        </h4>\r\n      </div>\r\n      {isActive && !isCanceled && (\r\n        <div className={theme.cardBody}>\r\n          <CancelBtn />\r\n        </div>\r\n      )}\r\n      {isGifted && (\r\n        <div className={theme.cardBody}>\r\n          <FaGift className=\"mr-2\" />\r\n          You were gifted this subscription!\r\n          <FaGift className=\"ml-2\" />\r\n          <br />\r\n          You may purchase a recurring subscription at the end of this period.\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst EmailVerified = () => {\r\n  const { user } = useAuth0()\r\n  const { theme } = useTheme()\r\n\r\n  if (!user?.email) return <></>\r\n\r\n  return (\r\n    <div className={`${theme.card} mt-2`}>\r\n      <div className={theme.profileCardHeader}>\r\n        <h4>\r\n          <div className={centerContentClass}>User Email:</div>\r\n        </h4>\r\n      </div>\r\n      <div className={theme.cardBody}>\r\n        <h5 className=\"lead\">{user.email}</h5>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst Help = () => {\r\n  const { theme } = useTheme()\r\n  return (\r\n    <div className={`${theme.card} mt-2`}>\r\n      <div className={theme.profileCardHeader}>\r\n        <h4>Contact Us</h4>\r\n      </div>\r\n      <div className={theme.cardBody}>\r\n        <Contact size=\"normal\" />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst ToggleTheme = () => {\r\n  const { isActive } = useSubscription()\r\n  const { theme, isDark, toggleTheme } = useTheme()\r\n\r\n  return (\r\n    <div className={`${theme.card} mt-2`}>\r\n      <div className={theme.profileCardHeader}>\r\n        <h4>Visual Theme: {isDark ? 'Dark' : 'Light'}</h4>\r\n      </div>\r\n      <div className={`${theme.cardBody} ${centerContentClass} pb-0`}>\r\n        {isActive && (\r\n          <label htmlFor=\"visual-theme-switch\">\r\n            <Switch\r\n              onChange={toggleTheme}\r\n              checked={isDark}\r\n              onColor=\"#1C7595\"\r\n              onHandleColor=\"#E9ECEF\"\r\n              handleDiameter={36}\r\n              uncheckedIcon={false}\r\n              checkedIcon={false}\r\n              boxShadow=\"0px 1px 5px rgba(0, 0, 0, 0.6)\"\r\n              activeBoxShadow=\"0px 0px 1px 10px rgba(0, 0, 0, 0.2)\"\r\n              height={26}\r\n              width={80}\r\n              className=\"react-switch\"\r\n              id=\"visual-theme-switch\"\r\n            />\r\n          </label>\r\n        )}\r\n        {!isActive && (\r\n          <div className=\"alert alert-info text-center mt-3\" role=\"alert\">\r\n            <Link to={ROUTES.SUBSCRIBE} onClick={() => logClick('SubscribeDarkTheme')}>\r\n              Subscribe now\r\n            </Link>{' '}\r\n            to use dark theme!\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst SubscriptionExpired = () => (\r\n  <div className=\"mt-2\">\r\n    <div className=\"alert alert-danger text-center\" role=\"alert\">\r\n      <strong>Your subscription has expired!</strong>\r\n      <br />\r\n      <Link\r\n        to={ROUTES.SUBSCRIBE}\r\n        className={`btn btn-md btn-success mt-2`}\r\n        onClick={() => logClick('Resubscribe')}\r\n      >\r\n        Resubscribe now!\r\n      </Link>\r\n    </div>\r\n  </div>\r\n)\r\n"],"sourceRoot":""}