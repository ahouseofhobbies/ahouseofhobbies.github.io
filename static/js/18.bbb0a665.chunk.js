(this["webpackJsonpaos-reminders"]=this["webpackJsonpaos-reminders"]||[]).push([[18],{479:function(e,t){},480:function(e,t){},481:function(e,t){},482:function(e,t){},483:function(e,t){},514:function(e,t){},577:function(e,t,a){"use strict";a.r(t);var r=a(334),n=a(92),o=a(119),l=a(43),c=a(344),i=a(22),s=a(46),d=a(6),u=a(3),m=a(474),p=a.n(m),h=a(11),f=a(40);const N=", ",g="&&",b="HEADER",E=e=>{if(/ by {1,3}Azyr {1,3}Roster/gi.test(e[0]))return!0;return new RegExp(["play type","game type","army deemed"].join("|"),"gi").test(e[0])},S=e=>/Created.{1,5}with.{1,5}BattleScribe/gi.test(e[0]),v=e=>e.some((e=>e.includes(c.h)||e.includes("Allegiance:"))),A=e=>{const t=e.replace(/([A-Z]) ([a-z])/g,"$1$2").replace(/Role: {1,}(Leader|Battleline|Other)( {1,})?, {1,}Behemoth /g,"Role: Leader  ").replace(/Role: {1,}(Behemoth)( {1,})?, {1,}Artillery /g,"Role: Leader  ").replace(/( )?[\u2018\u2019]/g,"'").replace(/[\u201c\u201d]/g,'"').replace(/[\u2011\u2013\u2014]/g,"-").replace(/([a-z])- ([a-z])/g,"$1-$2").replace(/([\w]) {1,3}'s /g,"$1's ").replace(B,(e=>x[e])).replace(/Quantity: {2}[0-9]{1,2}/gi," ").replace(/[0-9]{1,4}pts/g," ").replace(/&/g,"AMPERSAND").replace(/General's Adjutant/g," ").replace(/([\w]+)? (General)/g,R).replace(/,/g,g).replace(/Sky Cannon: Shell/g,"Sky Cannon").split("ITEM: "),a=y(t.shift()),r=Object(d.uniq)(t.map(O).flat());return a.concat(r).map((e=>e.replace(/&&/g,",").replace(/AMPERSAND/g,"&")))},O=e=>{const t=e.replace(/HEADER/g," ").replace(/.+See the .+? of this unit/gi,"").replace(/.+This unit is also a Leader.+ the Leader section./gi,"").replace(/.+This unit is also a Behemoth.+ the Behemoth section./gi,"").replace(/Army deemed .+valid/gi," ").replace(/by Azyr Roster Builder/gi," ").replace(/[0-9]{1,4}pts[/][0-9]{1,4}pts Allies/gi," ").replace(/[0-9]{1,4}pts/g," ").replace(/\|/g,N).replace(/ {2,4}/g," ").replace(W,"Role: UNIT").replace(D,"Role: ENDLESS SPELL").replace(/Role: {1,4}Battalion/g,"Role: BATTALION").replace(_,"Prayer:").replace(w,"Spell:").replace(H,", SCENERY: $1, ").replace(/Battle Trait/g,"Command Trait").replace(k," ").replace(U," ").replace(/(Artefact|Prayer|Spell|Weapon|Command Trait|Mount Trait|Upgrade): ([\w-!' ]+)(\(.+?\))? (Artefact|Prayer|Spell|Weapon|Command Trait|Mount Trait|Upgrade| {1,3})/g,F),a=T(t).join(N).replace(/(Artefact|Prayer|Spell|Weapon|Command Trait|Mount Trait|Upgrade): ([\w-!' ]+) (Artefact|Prayer|Spell|Weapon|Command Trait|Mount Trait|Upgrade| {1,3})/g,"".concat(N,"$1: $2").concat(N,"$3")).replace(/(^|Role: UNIT +| {2})([\w-' ]+(&&| {2})[\w-!' ]+) Role: +(UNIT)/g,"$1 ".concat(N," UNIT: $2  ").concat(N)).replace(/(,| {2})([\w-' ]+?)&& ([\w-!' ]+?) Role:[ ]+(UNIT|BATTALION|ENDLESS SPELL)/g,"$4: $2".concat(g," $3").concat(N)).replace(/(,| {2})([\w-!' ]+) Role:[ ]+(UNIT|BATTALION|ENDLESS SPELL)/g,"".concat(N,"$3: $2").concat(N)).replace(/ {2,4}/g," ").replace(/(,| {2})?([\w-!' ]+) Role:[ ]+(UNIT|BATTALION|ENDLESS SPELL)/g,"".concat(N,"$3: $2").concat(N)).replace(/(Artefact|Command Trait|Mount Trait|Prayer|Spell|Upgrade|Weapon):/g,P).replace(/(UNIT:|,) ([\w-&!' ]+) Ally/g,"ALLY: $2").replace(/\/ Allies/g,"").split(",").join(N);return T(a)},y=e=>{const t=e.replace(/HEADER( HEADER)+/g,b).replace(G," ").replace(M,"ALLEGIANCE:").replace(/Realm of Battle:/g,"General' Handbook:").replace(/ITEM: /g,N).replace(/([\w]) &&/g,"$1".concat(g)).replace(/Mercenary Company: {1,3}([\w-' ]+)(HEADER|Extra Command|(?:$))/g,I).replace(/Mercenary Company:/g,"MERCENARY COMPANY:").replace(/Extr.+ Command .+chased \(.+\)/g,"").replace(/(\w) +Kharadron Code: /g,"$1".concat(N,"Kharadron Code: ")).replace(/.+?Allegiance:([\w-!' ]+)(HEADER|ALLEGIANCE:|REALMSCAPE:|MERCENARY COMPANY:|,|(?:$))/g,C).replace(/General\' Handbook:.+(AQSHY|CHAMON|GHUR|GHYRAN|HYSH|SHYISH|STYGXX|ULGU)&& [\w- ]+?(HEADER|,|MERCENARY|(?:$))/g,L).replace(/Army deemed .+valid/gi," ").replace(/by Azyr Roster Builder/g," ").replace(/[0-9]{1,4}pts[/][0-9]{1,4}pts Allies/gi," ").replace(/[0-9]{1,4}pts/g," ").replace(/\|/g,N).replace(/((Kharadron Code|ALLEGIANCE): [\w-&;' ]+) HEADER/g,"$1".concat(N)).replace(/HEADER/g," ");return T(t)},T=e=>e.split(",").map((e=>e.replace(/ {2,}/g," ").trim())).filter((e=>!!e)),j=e=>{const t=Object(d.sortBy)(Object(d.uniq)(e)).reverse();let a=99,r=99;return t.length>3&&(a=t[t.length-3],r=t[t.length-2]),{headerHeight:a,itemHeight:r}},C=(e,t,a)=>"FACTION: ".concat(t.trim()).concat(N).concat(a),R=(e,t,a)=>t&&["Aggressive","Freeguild"].includes(t)?e:"".concat(t||"","  "),I=(e,t,a)=>{const r="Extra Command"===a?a:"";return"".concat(N,"MERCENARY COMPANY: ").concat(t.trim()).concat(N).concat(r)},L=(e,t,a)=>{const r="MERCENARY"===a.toUpperCase()?a:"";return"".concat(N,"REALMSCAPE: ").concat(t.trim()).concat(N).concat(r)},F=(e,t,a,r,n)=>"".concat(N).concat(t,": ").concat(a).concat(r||"").concat(N).concat(n),P=e=>e.toUpperCase(),_=new RegExp("Prayer:","g"),w=new RegExp("Spell:","g"),W=new RegExp("Role: {1,4}(".concat(["Leader","Battleline","Artillery","Behemoth","Other"].join("|"),")"),"g"),D=new RegExp("Role: {1,4}(".concat(["Endless Spell","Magmic Invocation","Judgement of Khorne"].join("|"),")"),"g"),M=new RegExp("(".concat(["Constellation","Coven","Enclave","Glade","Grand Court","Great Nations","Greatfray","Host","Legion","Lineage","Lodge","Mawtribe","Sky-port","Skyport","Slaughterhost","Stormhost","Stronghold","Temple","Warclan","Warriors","Way of the Seraphon"].join("|"),"):"),"g"),x={"Aggr essiv e":"Aggressive","Allher d":"Allherd","Alwa ys T ak e What Y ou Ar e Owed":"Always Take What You Are Owed","Amar anthine":"Amaranthine","AQSH Y":"AQSHY","Ar tiller y":"Artillery","Arm y deem ed  invalid  by":"Army deemed invalid by","Balefir e":"Balefire","Bar ak-":"Barak-","Bat tle":"Battle","Bear er":"Bearer","Behem oth":"Behemoth","Berserk er Lor d":"Berserker Lord","Berserk Er Lor D":"Berserker Lord","Black ened":"Blackened","Blood-for ged":"Blood-forged","Bloodlor ds":"Bloodlords","Bloodr eaper":"Bloodreaper","Boltst orm":"Boltstorm","Br eath of Mor grim":"Breath of Morgrim","CH AMON":"CHAMON","Cir cle":"Circle","Com m and":"Command","Cour t":"Court","Court s":"Courts","Decr epify":"Decrepify","Def ender":"Defender","Desecr ator":"Desecrator","DHOM-H AIN":"DHOM-HAIN","Dominat or":"Dominator","Dr aining":"Draining","Dr ead":"Dread","Emissar y of the Deep Places":"Emissary of the Deep Places","Encla ve":"Enclave","Eternal Conflagr ation":"Eternal Conflagration","Ether al Blessings":"Etheral Blessings","Ether eal":"Ethereal","Gener al":"General","Ghurish Mawshar d":"Ghurish Mawshard","Godseek ers":"Godseekers","Gr eatblade":"Greatblade","Gristlegor e":"Gristlegore","Honour ed Retinue":"","Honoured Retinue":"","Hosts Duplicit ous":"Hosts Duplicitous","Iggrind-Kaz Surge-injection Endrin Mk \u200b  IV":"Iggrind-Kaz Surge-injection Endrin Mk. IV","Incr edible":"Incredible","Inv ocation":"Invocation","IONRA CH":"Ionrach","Khar adr on Ov erlor ds":"Kharadron Overlords","Khar adron":"Kharadron","L ORDS":"LORDS","Lizar d":"Lizard","Mak er":"Maker","Master y":"Mastery","Mercenar y Company":"Mercenary Company","mor e":"more","Nur gle":"Nurgle","Or der":"Order","Ossiar ch Boner eapers":"Ossiarch Bonereapers","Ov erlords":"Overlords","Pist ol":"Pistol","Pr ogr ess":"Progress","Pur chased":"Purchased","Realm-lor ds":"Realm-lords","Sacr ament":"Sacrament","Sepulchr al Plate":"Sepulchral Plate","Shar d":"Shard","Sk ewer":"Skewer","Skr yre":"Skryre","Sky Port":"Skyport","Sky-por t":"Sky-port","Sla yer":"Slayer","Souldr aught":"Souldraught","Spectral 9 ether":"Spectral Tether","Standar d":"Standard","Starstrik e":"Starstrike","T ype":"Type","These Ar e Just Guidelines":"These Are Just Guidelines","Thr one":"Throne","Varanguar d":"Varanguard","Warbeat:":"Prayer:","Warpfir e":"Warpfire","Way of the Ser aphon":"Way of the Seraphon","Wick ed":"Wicked","Wor d":"Word","A'rgath, the King of Blades":"Argath the King of Blades","Coalbear d's Collapsible Compar tments":"Coalbeard's Collapsible Compartments","Don 't Ar gue With The Wind":"Don't Ar gue With The Wind","Ther e's Alwa ys a Br eez e If Y ou Look F or It":"There's Always a Breeze If You Look For It","Wher e Ther e's W ar, Ther e's Gold":"Where There's War, There's Gold","Zonbarcorp'Debtsettler' Spar Torpedo":"Zonbarcorp 'Debtsettler' Spar Torpedo","FUETH\xc1N":"FUETHAN"},B=new RegExp(Object.keys(x).join("|"),"g"),k=new RegExp("Mark( of Chaos)?: {1,3}(".concat(u.K.map(f.e).concat("Undivided").join("|"),")"),"gi"),U=new RegExp("Aura of Chaos: {1,3}Aura of (Nurgle|Slaanesh|Khorne|Tzeentch|Chaos Undivided)","gi"),G=new RegExp("Circle of the Varanguard: {1,3}(First|Second|Third|Fourth|Fifth|Sixth|Seventh|Eighth) Circle","gi"),H=new RegExp("(".concat(["Penumbral Engine"].join("|"),")"),"g");var Y=a(202),$=a(63),X=a(23),q=a(97),K=a(371);var V=a(7);const z=(e,t)=>{const a=e.replace(/ +/g,""),r=t.split("").map(((e,t)=>" "===e?t:-1)).filter((e=>e>-1));let n=0,o=[];for(let c=0;c<=a.length;c++)r.includes(c)?o.push(" "):(o.push(a[n]),n++);const l=o.join("");return t.toUpperCase().includes(l.toUpperCase())},J=e=>({matchNoOf:t=>{const a=(e=>{const t=u.K.map(f.e).map((e=>e.toUpperCase())).find((t=>e.includes(" OF ".concat(t))));return t&&(e=e.replace(" OF ".concat(t),"")),e})(t);return e.find((e=>e.toUpperCase().includes(a)))},matchNoParens:t=>{const a=t.replace(/\(.+\)/g,"").trim();return e.find((e=>e.toUpperCase().replace(/\(.+\)/g,"").includes(a)))},matchNoPunc:t=>{const a=Object(f.d)(t);return e.find((e=>Object(f.d)(e.toUpperCase()).includes(a)))},matchNoSemicolons:t=>{const a=Object(d.last)(t.split(":"));return e.find((e=>e.toUpperCase().includes(a)))},matchPoorSpacing:t=>e.find((e=>z(t,e))),matchUpper:t=>e.find((e=>e.toUpperCase().includes(t)))}),Q=e=>e.filter((e=>"warn"===e.severity)),Z=e=>e.some((e=>"error"===e.severity)),ee=e=>Z(e)||(e=>e.some((e=>"warn"===e.severity)))(e),te=function(e,t,a){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;const l=J(e);return e=>{if(o[e]&&(e=o[e]),t[e])return e;const c=e.toUpperCase(),i=l.matchUpper(c);if(i)return i;const s=l.matchNoOf(c);if(s)return s;const d=l.matchNoPunc(c);if(d)return d;const u=l.matchNoParens(c);if(u)return u;const m=l.matchNoSemicolons(c);if(m)return m;if(n){const e=l.matchPoorSpacing(c);if(e)return e}return r&&a.push({text:e,severity:"warn"}),""}};var ae=a(162);const re=(e,t,a,r,n)=>{const o=Object(d.uniq)(Q(a).map((e=>e.text)).concat(e));if(0===o.length)return{allyFactionNames:[],allySelections:{}};const l=(e=>{const t=Object($.b)(),{GrandAlliance:a}=t[e],r={[V.a]:u.b,[V.b]:u.e,[V.c]:u.f,[V.e]:u.z}[a];return Object(d.uniq)(Object(d.without)(Object.keys(t).filter((e=>t[e].GrandAlliance===a)).concat(u.v,u.u),e,u.b,u.e,u.f,u.z).concat(r)).reduce(((e,a)=>{const r=t[a].AggregateArmy.Battalions||[],n=t[a].AggregateArmy.Units||[];return e[a]={battalions:r.map((e=>{let{name:t}=e;return t})),units:n.map((e=>{let{name:t}=e;return t}))},e}),{})})(t),c=Object.keys(l).reduce(((e,t)=>{const{units:c,battalions:i}=l[t],s=Object(ae.a)(c),u=Object(ae.a)(i),m=te(i,u,a,!1,r,n),p=o.map(m).filter((e=>!!e)),h=te(c,s,a,!1,r,n),f=o.map(h).filter((e=>!!e));return f.length+p.length>0&&(e.allySelections[t]={battalions:p,units:f},e.allyFactionNames=Object(d.uniq)(e.allyFactionNames.concat(t))),e}),{allySelections:{},allyFactionNames:[]}),i=Object.keys(c.allySelections).reduce(((e,t)=>(Object(d.uniq)(c.allySelections[t].units).forEach((a=>{e[a]?e[a]=e[a].concat(t):e[a]=[t]})),e)),{});return Object.keys(i).forEach((e=>{i[e].length>1&&(a.push({text:"Allied ".concat(e," can belong to ").concat(i[e].map(f.e).join(" or "),". Please add this unit manually."),severity:"ally-warn"}),i[e].forEach((t=>{const a=c.allySelections[t];a.units=Object(d.without)(a.units,e),0===a.units.length&&(delete c.allySelections[t],c.allyFactionNames=Object(d.without)(c.allyFactionNames,t))})))})),c};var ne=a(346);const oe=(e,t)=>{const a=ne.f[t];let{errors:r,factionName:n,subFactionName:o,selections:l,unknownSelections:c,allyUnits:u}=e;if(Z(r))return e;if(!Object(s.b)(n)){const r=ne.a[n];(r?i.c:i.h)("faction:".concat(n||"Unknown"),t);const o=n?"".concat(n," are not supported."):a.fileReadError,l=r?{text:n,severity:"deprecation-warn",reason:r}:(e=>({text:e,severity:"error"}))(o);return{...e,errors:[l]}}c=c.filter((e=>!ne.c.includes(e)));const m=[],p=Object(q.a)(n,o),f=((e,t,a,r,n,o,l)=>c=>{const i=e[X.d[c]].map((e=>{let{name:t}=e;return t})),s=Object(ae.a)(i),u=J(i),m=te(i,s,a,!0,o,l),p=t[c].map(m).filter((e=>!!e)),h=r.map((e=>{const t="".concat(e);if(l[e]&&(e=l[e]),s[e])return n.push(t),e;if("units"===c&&ne.e[t])return n.push(t),ne.e[t];const a=e.toUpperCase(),r=u.matchUpper(a);if(r)return n.push(t),r;const i=u.matchNoParens(a);if(i)return n.push(t),i;if(o){const e=u.matchPoorSpacing(a);if(e)return n.push(t),e}return""})).filter((e=>!!e));return Object(d.uniq)(p.concat(h))})(p,l,r,c,m,a.checkPoorSpacing,a.typoMap),N=X.b.reduce(((e,t)=>(e[t]=f(t),e)),{}),g=Object(d.difference)(c,m);g.length>0&&h.g&&console.log("Could not find: ",g);const b=re(u,n,r,a.checkPoorSpacing,a.typoMap);((e,t,a)=>{if(0===a.length||0===t.length)return;const r=(e=>e.filter((e=>"ally-warn"===e.severity||"ambiguity-warn"===e.severity||"deprecation-warn"===e.severity||"warn"===e.severity)))(a).map((e=>{let{text:t}=e;return t}));let n=!1;t.forEach((t=>{if(n)return;const o=e.Flavors.find((e=>e.name===t));o&&o.effects.forEach((e=>{if(n)return;const t=r.find((t=>t.toUpperCase()===e.name.toUpperCase()));t&&(n=!0,Object(d.remove)(a,(e=>e.text===t)))}))}))})(p,N.flavors,r),(e=>{e.forEach((e=>{const t=ne.a[e.text];void 0!==t&&(e.severity="deprecation-warn",e.reason=t)}))})(r),((e,t,a,r)=>{const n=Object.values(a.allySelections).map((e=>e?e.units:[])).flat();Object.values(t).concat(n).flat().forEach((t=>{const a=r[t];a&&e.push({text:"Azyr lists more than one unit as '".concat(a,"'. Please check that we have imported the correct one."),severity:"ambiguity-warn"})}))})(r,N,b,a.ambiguousNamesMap),r=le(r,N,b),r=Object(d.uniqBy)(r,"text"),Q(r).forEach((e=>Object(i.h)(e.text,t)));const E=((e,t,a)=>(Object.keys(e).forEach((r=>{let n=r;const o=[...e[n]],l=t[X.d[n]].filter((e=>e.isSideEffect)).map((e=>e.name));e[n]=Object(d.difference)(o,l),Object(d.difference)(o,e[n]).forEach((e=>Object(i.j)(e,a)))})),e))({...l,...N},p,t),S=((e,t)=>{const a=Object(K.a)([t.SubFaction]);Object.entries(a[t.SubFaction.name]).forEach((a=>{let[r,n]=a;e[r]?(null===n||void 0===n?void 0:n.values)&&(e[r]=Object(d.uniq)(e[r].concat(n.values))):h.g&&console.warn("Invalid side effect key: '".concat(r,"'. It probably is a typo in this subfaction's files: \"").concat(t.SubFaction.name,'"'))}));const r=Object.entries(X.d).reduce(((e,a)=>{let[r,n]=a;return e[r]=Object(K.a)(t[n]),e}),{});return Object.keys(r).forEach((a=>{const n=r[a];e[a].forEach((a=>{n[a]&&Object.keys(n[a]).forEach((r=>{var o,l;const c=(null===(o=n[a])||void 0===o||null===(l=o[r])||void 0===l?void 0:l.values)||[];e[r]?e[r]=Object(d.uniq)(e[r].concat(c)):h.g&&console.warn("Invalid side effect key: '".concat(r,"'. It probably is a typo in this subfaction's files: \"").concat(t.SubFaction.name,'"'))}))}))})),e})(E,p);return{...e,errors:r,unknownSelections:g,selections:S,...b}},le=(e,t,a)=>{const r=Object.values(a.allySelections).map((e=>[...e.units,...e.battalions])).flat(),n=Object.values(t).concat(r).flat(),o=e.filter((e=>!n.some((t=>t===e.text)))).filter((e=>!n.some((t=>t.startsWith(e.text))))),l=(e=>e.filter((e=>"ally-warn"===e.severity)))(e);return o.reduce(((e,t)=>("warn"===t.severity&&l.some((e=>e.text.startsWith("Allied ".concat(t.text," "))))||e.push(t),e)),[])},ce={"COMMAND TRAIT":"command_traits","ENDLESS SPELL":"endless_spells","MOUNT TRAIT":"mount_traits",ALLEGIANCE:"flavors",ARTEFACT:"artifacts",BATTALION:"battalions",PRAYER:"prayers",SCENERY:"scenery",SPELL:"spells",UNIT:"units"},ie=e=>{let t="",a="",r=null,n=[],o=[];const l=Object.keys(X.d).reduce(((e,t)=>(e[t]=[],e)),{}),c=e.reduce(((e,l)=>{if(l.startsWith("FACTION:")){const r=se(l);return r.factionName&&(t=r.factionName),r.subFactionName&&(a=r.subFactionName),r.flavor&&(e.flavors=e.flavors.concat(r.flavor)),e}if(l.startsWith("General' Handbook:"))return r=Object(f.e)(l.replace("General' Handbook: ","")),e;if(l.startsWith("ALLY:")||l.startsWith("MERCENARY COMPANY:"))return l=l.replace(/(MERCENARY COMPANY|ALLY): /g,""),n.push(l),e;if(l.startsWith("WEAPON:"))return l=l.replace("WEAPON: ",""),o.push(l),e;if(l.startsWith("UPGRADE:"))return l=l.replace("UPGRADE: ",""),o.push(l),e;if(l.startsWith("Kharadron Code:")){const t=de(l);return e.command_traits=e.command_traits.concat(t),e}if(l.startsWith("ALLEGIANCE:")&&Object(s.b)(t)){let r=l.replace("ALLEGIANCE:","").trim();t!==u.F||r.endsWith(" Host")||(r="".concat(r," Host"));if(Object($.a)(t).subFactionKeyMap[r])return a=r,e;e.flavors.push(l.replace("ALLEGIANCE:","").trim())}let c=!1;return Object.entries(ce).forEach((t=>{let[a,r]=t;if(!c)return l.startsWith("".concat(a,":"))?(l=l.replace("".concat(a,": "),""),e[r]=e[r].concat(l),c=!0,e):void 0})),e}),l);return{allyFactionNames:[],allySelections:{},allyUnits:Object(d.uniq)(n),errors:[],factionName:t,subFactionName:a,origin_realm:null,realmscape_feature:null,realmscape:r,selections:c,unknownSelections:o}},se=e=>{const t=e.replace("FACTION: ","").trim(),a=ne.d[t],r=(null===a||void 0===a?void 0:a.factionName)||null,n=(null===a||void 0===a?void 0:a.subFactionName)||null;r||console.error("ALERT: Missing this faction: "+t);return{factionName:r,subFactionName:n,flavor:r?ne.b[t]:null}},de=e=>{const t=ue(),a=["ARTYCLE","FOOTNOTE","AMENDMENT"],r=e.replace("Kharadron Code: ","").split(";").map((e=>e.trim()));if(1===r.length){const e=r[0].toUpperCase(),n=new RegExp("(".concat(a.join("|"),"): "),"gi");return t.map((e=>e.replace(n,"").toUpperCase())).reduce(((a,r,n)=>(e.includes(r)&&a.push(t[n]),a)),[])}return r.map((e=>{let r="";const n=e.toUpperCase();return t.forEach((e=>{r||a.forEach((t=>{r||z("".concat(t,": ").concat(n),e.toUpperCase())&&(r=e)}))})),r||e}))},ue=()=>{const e=["ARTYCLE","FOOTNOTE","AMENDMENT"],t=Y.a.AggregateArmy.CommandTraits.filter((t=>e.some((e=>t.name.startsWith(e))))).map((e=>e.name)),a=Y.a.AggregateArmy.Flavors.map((t=>t.effects.filter((t=>e.some((e=>t.name.startsWith(e))))).map((e=>e.name)))).flat();return Object(d.uniq)(t.concat(a))};var me=a(484),pe=a.n(me),he=a(164);const fe=e=>e.replace(/(.+)\\n {1,}(.+)/g,"$1 $2").replace(/\r|\n|\v|\f|\u21b5/g," ").replace(/ {2,}/g," ").replace(/\*/g,"").replace(/[\u2018\u2019]/g,"'").replace(/[\u201c\u201d]/g,'"').replace(/[\u2011\u2013\u2014]/g,"-").replace(/\xa0/g," ").replace(/[^\x00-\x7F]/g,"").trim(),Ne=["Allegiance: The Ossiarch Empire","Allegiance","Alliegiance","Battle Tactics","Coalition","Damage Table","Extra Command Point","Game Type","Grand Strategy","Points Variation","Purchased Command Points","Realm of Battle","Realm of Origin"],ge=e=>{const t={"Command Abilities":"CommandAbilities","Grand Strategy":"GrandStrategies","The Kharadron Code":"CommandTraits",Artefact:"Artifacts",Prayer:"Prayers",Spell:"Spells",Weapon:"Weapons"};return Object.keys(e).reduce(((a,r)=>(Ne.includes(r)||(t[r]?a[t[r]]=e[r]:a[r]=e[r]),a)),{})},be=e=>!!e&&"childNodes"in e,Ee=e=>!!e&&"value"in e,Se=e=>!Ee(e)&&("li"===e.nodeName&&e.attrs&&e.attrs[0]&&"rootselection"===e.attrs[0].value),ve=e=>{const t={allegianceInfo:[],factionInfo:{factionName:null,grandAlliance:null},origin_realm:null,realmscape:null,rootSelections:[]},a=e=>{be(e)&&(Se(e)&&t.rootSelections.push(e),!t.realmscape&&(e=>!Ee(e)&&(!!Se(e)&&(!!e.childNodes.length&&!!e.childNodes.find((e=>be(e)&&"h4"===e.nodeName&&Ee(e.childNodes[0])&&"Realm of Battle"===e.childNodes[0].value)))))(e)&&(t.realmscape=Te(e)),!t.origin_realm&&(e=>!Ee(e)&&(!!Se(e)&&(!!e.childNodes.length&&!!e.childNodes.find((e=>be(e)&&"h4"===e.nodeName&&Ee(e.childNodes[0])&&"Realm of Origin"===e.childNodes[0].value)))))(e)&&(t.origin_realm=je(e)),!t.factionInfo.factionName&&(e=>!Ee(e)&&"li"===e.nodeName&&e.attrs&&e.attrs[0]&&"force"===e.attrs[0].value)(e)&&(t.factionInfo=Ce(e)),(e=>{var t,a,r,n,o,l,c,i;return!Ee(e)&&(!!Se(e)&&(!!e.childNodes.length&&("Allegiance: Seraphon"===(null===e||void 0===e||null===(t=e.childNodes)||void 0===t||null===(a=t[2])||void 0===a||null===(r=a.childNodes)||void 0===r||null===(n=r[0])||void 0===n||null===(o=n.childNodes)||void 0===o||null===(l=o[0])||void 0===l||null===(c=l.childNodes)||void 0===c||null===(i=c[0])||void 0===i?void 0:i.value)||!!e.childNodes.find((e=>be(e)&&("h4"===e.nodeName||"li"===e.nodeName)&&Ee(e.childNodes[0])&&("Allegiance"===e.childNodes[0].value||"Alliegiance"===e.childNodes[0].value||e.childNodes[0].value.startsWith("Allegiance:")))))))})(e)&&t.allegianceInfo.push(Re(e)),e.childNodes.length>0&&e.childNodes.forEach(a))};return a(e),t},Ae=e=>{try{const{childNodes:t=[]}=e,a=t.find((e=>"h4"===e.nodeName));if(!be(a)||!a.childNodes.length||!Ee(a.childNodes[0]))throw new Error("Could not find the item name");let r=a.childNodes[0].value.replace(/(.+)\[.+\]/g,"$1").trim();r.includes(" - ")&&(r=r.split(" - ")[1]),((e,t)=>{const a=["Skull Altar","Bad Moon Loonshrine","Great Mawpot","Bone-Tithe Nexus"];try{return!t.startsWith("Scenery: ")&&(!!a.includes(t)||!!e.childNodes[1].childNodes[1].childNodes[0].value.includes("SCENERY"))}catch(r){return!1}})(e,r)&&(r="Scenery: ".concat(r));const n=t.reduce(((e,t)=>{if("Grand Strategy"===r&&"p"===t.nodeName){var a,n;const e=null===t||void 0===t||null===(a=t.childNodes)||void 0===a||null===(n=a[1])||void 0===n?void 0:n.value;e&&(r="Grand Strategy: ".concat(e))}if("Triumphs"===r&&"p"===t.nodeName){var o,l;const e=null===t||void 0===t||null===(o=t.childNodes)||void 0===o||null===(l=o[1])||void 0===l?void 0:l.value;e&&(r="Triumphs: ".concat(e))}if(be(t)&&"table"===t.nodeName){const{tableName:a,names:r}=Oe(t);a&&(e[a]=r)}return e}),{}),o=ge(n);return{name:r,entries:o}}catch(t){return console.log("There was an error parsing a root selection"),console.error(t),{name:"",entries:{}}}},Oe=e=>{try{const t=e.childNodes[0].childNodes[0].childNodes[0].childNodes[0].value,a=e.childNodes[0].childNodes.slice(1).map((e=>e.childNodes[0]));return{tableName:t,names:a.map((e=>e.childNodes[0].value)).flat()}}catch(t){return{tableName:"",names:[]}}},ye=e=>(Ee(e)&&e.value&&(e.value=fe(e.value)),delete e.parentNode,delete e.namespaceURI,delete e.tagName,be(e)?(e.childNodes.length>0&&(e.childNodes=e.childNodes.map(ye).map((e=>(Ee(e)&&(e.value=fe(e.value)),e))).filter((e=>{if(Ee(e)){const t=fe(e.value);if(""===t)return!1;if("\n"===t)return!1;if("\n\n"===t)return!1}return!0}))),e):e),Te=e=>{try{return e.childNodes[1].childNodes[1].value.split(": ")[1].trim()}catch(t){return null}},je=e=>{try{return e.childNodes[1].childNodes[1].value.split(": ")[1].trim()}catch(t){return null}},Ce=e=>{try{const t=e.childNodes.find((e=>"h2"===e.nodeName));if(!be(t))throw new Error("Could not find factionNode");if(!Ee(t.childNodes[0]))throw new Error("Not a child node");const a=t.childNodes[0].value.replace("(Warscroll Compendium)","").replace(/\([\d]{1,5}pts\)/g,"").replace(/.+\((.+)\).+/g,"$1"),r=a.includes(": ")?": ":" - ";let[n,...o]=a.split(r).map((e=>e.replace(/(\(|\))/g,"").trim()));const l=o[o.length-1],c=null===ne.d||void 0===ne.d?void 0:ne.d[l],i=(null===c||void 0===c?void 0:c.factionName)||"Unknown";return{grandAlliance:n,factionName:i,subFactionName:(null===c||void 0===c?void 0:c.subFactionName)||null}}catch(t){return console.log("There was an error detecting the faction name"),console.error(t),{grandAlliance:null,factionName:null,subFactionName:null}}},Re=e=>{const t={factionName:null,flavors:null,subFactionName:null};try{const a=ye(e);if(a.childNodes=a.childNodes.filter((e=>be(e))),((e,t)=>{let a="";const r=e=>{a||(Ee(e)&&e.value.startsWith(t)?a=e.value:be(e)&&e.childNodes.length>0&&e.childNodes.forEach(r))};return r(e),a})(e,"Allegiance:"))return Pe(e);const{childNodes:r=[]}=a,n=e=>be(e)&&"span"===e.nodeName&&e.childNodes.length&&Ee(e.childNodes[0])&&"Selections:"===e.childNodes[0].value,o=r.find((e=>!!(be(e)&&"p"===e.nodeName&&e.childNodes.length&&e.childNodes.some(n))));if(!o||!be(o)){let e=Fe(r);t.flavors=e?[e]:null,e||(e=Le(r),t.flavors=e?[e]:null);const a=Ie(r);return t.faction=a.factionName,a.subFactionName&&(t.subFactionName=a.subFactionName),t}const l=o.childNodes.findIndex(n),c=o.childNodes.slice(l+1).reduce(((e,t)=>be(t)?e:e="".concat(e," ").concat(t.value)),"").trim(),i=ne.d[c],s=(null===i||void 0===i?void 0:i.factionName)||c,d=(null===i||void 0===i?void 0:i.subFactionName)||"";return{...t,factionName:s,subFactionName:d}}catch(a){return t}},Ie=e=>{const t={factionName:null,subFactionName:null};try{const a=e[2].childNodes[0].childNodes[0].childNodes[0];if("h4"!==e[2].childNodes[0].childNodes[0].nodeName)return t;if("#text"!==a.nodeName)return t;const r=ne.d[fe(a.value)],n=r.factionName||null,o=r.subFactionName||null;return{factionName:Object(s.b)(n)?n:null,subFactionName:o}}catch(a){return t}},Le=e=>{const t=["Cycle of Corruption, Summon Daemons of Nurgle","Cycle of Corruption","Light of the Bad Moon"];try{if("Categories:"===e[2].childNodes[0].childNodes[2].childNodes[0].childNodes[0].value)return null;const a=e[2].childNodes[0].childNodes[1],r=a.childNodes[0],n=e[2].childNodes[0].childNodes[1].childNodes[1];if("p"!==a.nodeName)return null;if("span"!==r.nodeName)return null;if("Selections:"!==r.childNodes[0].value)return null;if(!Ee(n)||"#text"!==n.nodeName)return null;const o=fe(n.value).replace("Cycle of Corruption, ","").replace("Summon Daemons of Nurgle","").trim();return t.includes(o)||!o?null:o}catch(a){return null}},Fe=e=>{try{if("Categories:"!==e[2].childNodes[0].childNodes[2].childNodes[0].childNodes[0].value)return null;const t=e[2].childNodes[0].childNodes[2].childNodes[1].childNodes[0].value.split(", ").map(fe).filter((e=>"SCENERY"!==e&&"GLOOMTIDE SHIPWRECK"!==e)),a=fe(t.shift()||"").split(" ").join("_");return Object(s.b)(a)&&t.length>0?t[0]:null}catch(t){return null}},Pe=e=>{var t,a,r,n,o,l,c,i,s,d,m,p,h,f,N,g,b;let E=e;const S=e.childNodes.find((e=>"ul"===e.nodeName));S&&(E=S.childNodes.find((e=>"li"===e.nodeName)));const v=E.childNodes.filter((e=>"p"===e.nodeName));let A="",O="";const y=v.reduce(((e,t)=>(t.childNodes.forEach((t=>{let a="";be(t)?(t.attrs.length>0&&("bold"===t.attrs[0].value&&"bold"!==A?(A="bold",O=""):"bold"!==t.attrs[0].value&&"not_bold"!==A&&(e[O]="",A="not_bold")),a=fe(t.childNodes[0].value)):Ee(t)&&(e[O]||(e[O]=""),A="not_bold",a=fe(t.value)),"bold"===A?O=fe("".concat(O," ").concat(a)).replace(/:$/g,""):e[O]=fe("".concat(e[O]," ").concat(a))})),e)),{}),T=Object.keys(y).reduce(((e,t)=>{const a=y[t].replace(/^Allegiance: /g,"").replace(/^Awakened Wyldwood(,)?/g,"").replace(/(, )?Ur-Gold(,)?/g,"").replace(/ {1,},$/g,"").trim();return e[t]=a,e}),{}),j=e.childNodes.filter((e=>be(e)&&"table"===e.nodeName)).reduce(((e,t)=>{const a=t.childNodes[0].childNodes[0].childNodes[0].childNodes[0].value,r=t.childNodes[0].childNodes.slice(1).map((e=>e.childNodes[0])).map((e=>e.childNodes[0].value)).flat();return e[a]=r,e}),{}),C=ge(Object.keys(T).reduce(((e,t)=>(j[t]?e[t]=j[t]:e[t]=T[t],e)),{})),R=Object.keys(C).reduce(((e,t)=>{const a=C[t];return a?("Selections"===t&&"string"===typeof a?e.flavors=[_e(a)]:"Categories"===t&&"string"===typeof a?e.factionName=a:e[t]=a,e):e}),{factionName:null,subFactionName:null,flavors:null});if("Allegiance: Soulblight"===(null===e||void 0===e||null===(t=e.childNodes[2])||void 0===t||null===(a=t.childNodes)||void 0===a||null===(r=a[0])||void 0===r||null===(n=r.childNodes)||void 0===n||null===(o=n[0])||void 0===o||null===(l=o.childNodes)||void 0===l||null===(c=l[0])||void 0===c?void 0:c.value)&&(R.factionName=u.o,R.subFactionName=he.a.subFactionKeyMap.Soulblight,R.flavors=[]),"Allegiance: Seraphon"===(null===S||void 0===S||null===(i=S.childNodes)||void 0===i||null===(s=i[0])||void 0===s||null===(d=s.childNodes)||void 0===d||null===(m=d[0])||void 0===m||null===(p=m.childNodes)||void 0===p||null===(h=p[0])||void 0===h?void 0:h.value)){var I,L,F,P,_,w,W,D,M,x,B,k,U,G,H,Y,X,q,K,V,z,J,Q,Z;const t=null===e||void 0===e||null===(I=e.childNodes)||void 0===I||null===(L=I[2])||void 0===L||null===(F=L.childNodes)||void 0===F||null===(P=F[0])||void 0===P||null===(_=P.childNodes[2])||void 0===_||null===(w=_.childNodes)||void 0===w||null===(W=w[0])||void 0===W||null===(D=W.childNodes)||void 0===D||null===(M=D[0])||void 0===M||null===(x=M.childNodes)||void 0===x||null===(B=x[0])||void 0===B?void 0:B.value,a=null===S||void 0===S||null===(k=S.childNodes)||void 0===k||null===(U=k[0])||void 0===U||null===(G=U.childNodes[2])||void 0===G||null===(H=G.childNodes)||void 0===H||null===(Y=H[0])||void 0===Y||null===(X=Y.childNodes)||void 0===X||null===(q=X[1])||void 0===q||null===(K=q.childNodes)||void 0===K||null===(V=K[1])||void 0===V||null===(z=V.value)||void 0===z||null===(J=z.replace("The ",""))||void 0===J||null===(Q=J.replace(", Show Celestial Conjuration Table",""))||void 0===Q?void 0:Q.replace("Show Celestial Conjuration Table","");!t&&!a||R.flavors||(R.flavors=[]),t&&(R.subFactionName=t),a&&(null===(Z=R.flavors)||void 0===Z||Z.push(a)),R.factionName=u.D}if("Allegiance: Lumineth"===(null===(f=E)||void 0===f||null===(N=f.childNodes)||void 0===N||null===(g=N[0])||void 0===g||null===(b=g.childNodes)||void 0===b?void 0:b[0].value)){var ee,te,ae,re,ne,oe,le,ce,ie;const e=null===(ee=E)||void 0===ee||null===(te=ee.childNodes)||void 0===te||null===(ae=te[2])||void 0===ae||null===(re=ae.childNodes)||void 0===re||null===(ne=re[1])||void 0===ne||null===(oe=ne.childNodes)||void 0===oe||null===(le=oe[0])||void 0===le?void 0:le.value;e&&(null===(ce=Object($.a)(u.t))||void 0===ce||null===(ie=ce.flavorKeys)||void 0===ie?void 0:ie.includes(e))&&(R.flavors=[e],R.factionName=u.t)}return R},_e=e=>e.replace(/(Legion: )/g,""),we=["Coalition","Crew","Screaming Skull Catapult Crew","Show Celestial Conjuration Table","Summon Bleeding Icon","Summon Hexgorger Skulls","Summon Molten Infernoth","Summon Runic Fyrewall","Summon Umbral Spellportal","Summon Wrath-Axe","Summon Zharrgron Flame Splitter","Summoning","Ur-Gold","Summon Ravenak's Gnashing Jaws"],We={"Duke Crakmarrow and the Grymwatch":["Duke Crakmarrow","The Grymwatch"]},De={"Battle Traits":"command_traits","Bound Endless Spell":"endless_spells","Command Abilities":"command_abilities","Command Traits":"command_traits","Core Battalion":"battalions","Endless Spell":"endless_spells","Grand Strategy":"grand_strategies","Invocation of Khaine":"endless_spells","Magmic Invocation":"endless_spells",...u.K.reduce(((e,t)=>(e["".concat(Object(f.e)(t)," Core Battalion")]="battalions",e)),{}),"Orruk Warclans Core Battalion":"battalions","Slaves to Darkness Core Battalion":"battalions","Sons of Behemat Core Battalion":"battalions","Stormcast Core Battalion":"battalions","Super Battalion":"battalions",Artifacts:"artifacts",Battalion:"battalions",Commands:"command_abilities",Enginecoven:"battalions",Judgement:"endless_spells",Prayers:"prayers",Scenery:"scenery",Spells:"spells",Traits:"command_traits",Triumphs:"triumphs",Unit:"units",Manifestations:"manifestations"},Me={"Charnel Throne":"scenery","Feculent Gnarlmaw":"scenery","Shrine Luminor":"scenery"},xe=e=>{var t,a,r;if((null===(t=e.entries.Unit)||void 0===t?void 0:t[0])===e.name)return!1;if(!e.entries["Battalion Abilities"]||(null===(a=e.entries)||void 0===a||null===(r=a["Battalion Abilities"])||void 0===r?void 0:r[0])===e.name)return!1;return!Object.keys(De).some((t=>e.name.startsWith(t)))},Be=e=>{const t=pe.a.parse(e),a=ye(t),{allegianceInfo:r,factionInfo:n,realmscape:o,origin_realm:l,rootSelections:c}=ve(a),{factionName:i,subFactionName:u,flavors:m}=((e,t)=>{const a={factionName:Object(s.b)(t.factionName)?t.factionName:null,subFactionName:null,flavors:[]};e.forEach((e=>{var t,r;a.factionName||null===(r=e.flavors)||void 0===r||r.forEach((e=>{var t;const r=Object(s.b)(e)?e:null===(t=ne.d[e])||void 0===t?void 0:t.factionName;!a.factionName&&Object(s.b)(r)&&(a.factionName=r)}));const n=Object(s.b)(e.factionName)?e.factionName:null===(t=ne.d[e.factionName||""])||void 0===t?void 0:t.factionName;!a.factionName&&Object(s.b)(n)&&(a.factionName=n),e.flavors&&(a.flavors=a.flavors.concat(e.flavors)),e.subFactionName&&(a.subFactionName=e.subFactionName)}));const r=a.factionName||t.factionName,n=Object.keys(ne.d).filter((e=>{var t;return(null===(t=ne.d[e])||void 0===t?void 0:t.factionName)===r})),o=Object(d.without)(Object(d.uniq)(a.flavors),r,...n);let l=a.subFactionName||t.subFactionName||"";if(Object(s.b)(r)&&!l){const e=Object($.a)(r),t=a.flavors.find((t=>!!e.subFactionKeyMap[t]));t&&(l=t)}return{factionName:r,subFactionName:l,flavors:Object(d.without)(o,l)}})(r,n);return{allyFactionNames:[],allySelections:{},allyUnits:[],errors:[],factionName:i,subFactionName:u||"",origin_realm:l,realmscape_feature:null,realmscape:o,selections:{...((e,t)=>{const a=Object.keys(X.d).reduce(((e,t)=>(e[t]=[],e)),{});return e.forEach((e=>{if(Ne.includes(e.name))return;let[t,r]=[!1,!0];if(xe(e)){const r=fe(e.name);a.battalions=Object(d.uniq)(a.battalions.concat(r)),t=!0}if(t||Object.keys(De).forEach((n=>{if(!t&&e.name.startsWith("".concat(n,":"))){const o=e.name.split("".concat(n,":"))[1].split(",").map(fe);a[De[n]]=Object(d.uniq)(a[De[n]].concat(o)),t=!0,["Endless Spell","Bound Endless Spell"].includes(n)&&(r=!1)}})),!t){const r=fe(e.name);Object.keys(Me).forEach((e=>{t||e!==r||(a[Me[e]]=Object(d.uniq)(a[Me[e]].concat([r])),t=!0)}))}if(!t){const t=fe(e.name),r=We[t]||[t];a.units=Object(d.uniq)(a.units.concat(r))}r&&Object.keys(e.entries).forEach((t=>{if(De[t]){const r=Object(d.without)(e.entries[t],...we);a[De[t]]=Object(d.uniq)(a[De[t]].concat(r))}}))})),t.forEach((e=>{Object.keys(e).forEach((t=>{if(De[t]){const r=e[t];r&&(a[De[t]]=Object(d.uniq)(a[De[t]].concat(r)))}}))})),a.units.forEach((e=>{if(e.endsWith("s")){const t=e.slice(0,-1);a.units=Object(d.without)(a.units,t)}})),a})(c.map(Ae),r),flavors:m},unknownSelections:[]}};var ke=a(497),Ue=a.n(ke);var Ge=a(163),He=a(10);const Ye=e=>e.map((e=>e.replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/^[0-9]{1,2}"$/g,"").replace(/^[0-9]{1,2}"\*$/g,"").replace(/^[0-9]{1,2}[D|d]6"/g,"").replace(/^[0-9]{1,2}\*\+/g,""))).filter((e=>!!e&&e.length>2&&"Warscroll Builder on www.warhammer-community.com"!==e&&"* See Warscroll"!==e)).join("\xac").replace(/[^\xac]*?\([0-9]+\)\xac(?!(LEADERS|UNITS|ARTILLERY|BEHEMOTHS|WAR MACHINES|ENDLESS SPELLS & INVOCATIONS|ENDLESS SPELLS|CORE BATTALIONS|BATTALIONS|BATTLELINE|TOTAL|Spearhead|Main Body|Rearguard|Extra Command Point|-|[^\xac]*?\([0-9]+\)))(.*?)\xac/gi,"$2\xac").split("\xac").map((e=>e.replace(/ \([0-9]+\)/g,"").replace(/[0-9]+ x /g,"").replace(/ x [0-9]{1,3}( \([0-9]{1,4}\))?/g,"").replace(/\*+$/g,"").replace(/^\*+/g,"").replace(/ - Single ?$/g,"").trim())),$e=Object(d.uniq)(Object.values(Object($.b)()).map((e=>(e.AggregateArmy.FlavorType||"").replace(/s$/,""))).filter((e=>!!e)).concat(["Host of Chaos"])),Xe=He.a.map((e=>e.name)),qe=["Artillery","Leaders","Units","Behemoths","War Machines","Battleline","Spearhead","Main Body","Rearguard"].map((e=>e.toUpperCase())),Ke=e=>{const t=Ye(e),a=He.m.map((e=>e.name));let r=[],n="",o="",l=null,c="";const i=Object.keys(X.d).reduce(((e,t)=>(e[t]=[],e)),{}),m=t.reduce(((e,t)=>{if(Ve[t]){const a=Ve[t];return e[a]=e[a].concat(t),e}if(t.includes("Allegiance:")){const a=t.replace(/(.+)?Allegiance: /g,"").split(" - ").map((e=>e.trim()))[0].trim(),r=ne.d[a];return n=(null===r||void 0===r?void 0:r.factionName)||a,(null===r||void 0===r?void 0:r.subFactionName)&&(o=r.subFactionName),e}if(t.startsWith("undefined x ")&&(t=t.replace("undefined x ","")),t.startsWith("Skyport: ")){const a=t.replace(/^Skyport: /g,"").trim();return e.flavors=e.flavors.concat(a),e}if(t.startsWith("- Sky Port: ")){const a=t.replace("- Sky Port: ","").trim().replace(" ","-");return"None"!==a&&(e.flavors=e.flavors.concat(a)),e}if(t.startsWith("- Mortal Realm: "))return l=t.replace("- Mortal Realm: ","").trim(),e;if(qe.includes(t))return c="units",e;if("BATTALIONS"===t||"CORE BATTALIONS"===t)return c="battalions",e;if("ENDLESS SPELLS / TERRAIN"===t||"ENDLESS SPELLS / TERRAIN / COMMAND POINTS"===t||"ENDLESS SPELLS & INVOCATIONS"===t)return c="endless_spells",e;if("Extra Command Point"===t)return e;if(t.startsWith("- ")){if(t.startsWith("- General"))return e;if(t.startsWith("- City Role"))return e;if(t.startsWith("- Mark of Chaos : "))return e;if(t.startsWith("- Host Option: "))return e;if(t.startsWith("- Triumphs: ")){const a=t.replace("- Triumphs: ","").split(",").map((e=>e.trim()));return e.triumphs=e.triumphs.concat(a),e}if(t.startsWith("- Grand Strategy: ")){const a=t.replace("- Grand Strategy: ","").trim();return"None Chosen"!==a&&e.grand_strategies.push(a),e}if(t.startsWith("- Universal Spell Lore: "))return e.spells.push(t.replace("- Universal Spell Lore: ","")),e;if(t.startsWith("- Universal Prayer Scripture: "))return e.prayers.push(t.replace("- Universal Prayer Scripture: ","")),e;if(t.startsWith("- Tribe: ")){const{flavor:a,trait:r}=Qe(t);return e.flavors.push(a),r&&(e.command_traits=e.command_traits.concat(r)),e}if(t.startsWith("- Additional Footnote: ")){const a=t.replace("- Additional Footnote: ","").trim();if(a)return e.command_traits=e.command_traits.concat(a),e}if(t.startsWith("- Damned Legion: ")){const a=t.replace("- Damned Legion: ","").replace(/ \(.+\)/,"").trim();return a&&(o=a),e}if(t.startsWith("- Great Endrinworks")){const a=t.replace(/- Great Endrinworks ?: /,"").trim().replace(/\(.+\)/g,"").trim();if(a)return e.artifacts=e.artifacts.concat(a),e}if(t.startsWith("- Grand Court")){const a=["Gristlegore","Morgaunt","Blisterskin","Hollowmourne"].find((e=>t.includes(e)));if(a)return e.flavors=e.flavors.concat(a),e}if(t.startsWith("- City")){const{flavor:a,trait:r}=Ze(t);return e.flavors=e.flavors.concat(a),r&&(e.command_traits=e.command_traits.concat(r)),e}if(t.startsWith("- Allies")){const t=Object(d.last)(e.units);if(t){const a=[...e.units];a.pop(),e[c]=a,r.push(t)}return e}if(t.startsWith("- Misthavn Narcotic: ")){const a=t.replace("- Misthavn Narcotic: ","").trim();return e.artifacts.push(a),e}if(t.startsWith("- Command Trait : ")&&t.replace("- Command Trait : ","").match(":")){const a=t.replace("- Command Trait : ","").split(":").map((e=>e.trim()));return e.command_traits=e.command_traits.concat(...a),e}if(t.startsWith("- Command Trait: ")&&t.replace("- Command Trait: ","").match(":")){const a=t.replace("- Command Trait: ","").split(":").map((e=>e.trim()));return e.command_traits=e.command_traits.concat(...a),e}if(t.startsWith("- Command Trait: Extremely Bitter")){let a=["Extremely Bitter (Breaker Tribe)"];const r=t.replace("- Command Trait: Extremely Bitter - ","").trim();return r&&a.push(r),e.command_traits=e.command_traits.concat(...a),e}if(t.startsWith("- Command Trait: Very Acquisitive - ")){e.command_traits.push("Very Acquisitive (Taker Tribe)");const a=t.replace("- Command Trait: Very Acquisitive - ","").trim();return a&&e.artifacts.push(a),e}if(t.startsWith("- Command Trait")){const{trait:a,spell:r}=tt("Command Trait",t);return e.command_traits=e.command_traits.concat(a),r&&(e.spells=e.spells.concat(r)),e}if(t.startsWith("- Mount Trait")){const a=ze("Mount Trait",t);return e.mount_traits.push(a),e}if(t.startsWith("- Drakeblood Curse")){const a=ze("Drakeblood Curse",t);return e.command_traits=e.command_traits.concat(a),e}if(t.startsWith("- Grand Court")){const a=ze("Grand Court",t);return e.command_traits=e.command_traits.concat(a),e}if(t.match(/^- (.+ \()?Artefact(\))?( )?:/)){const{trait:a,spell:r}=tt("Artefact",t);return e.artifacts=e.artifacts.concat(a),r&&"None"!==r&&(e.spells=e.spells.concat(r)),e}if(t.search(/^- .+ Spell: /g)>-1){const a=ze("Spell",t);return"None"!==a&&e.spells.push(a),e}if(t.startsWith("- Spell")){const a=ze("Spell",t);return"None"!==a&&(e.spells=e.spells.concat(a)),e}if(t.search(/^- .+ Prayer: /g)>-1){const a=ze("Prayer",t);return e.prayers.push(a),e}if(t.startsWith("- Prayer")){t.startsWith("- Prayer1")&&(t=t.replace("- Prayer1","- Prayer"));const a=ze("Prayer",t);return e.prayers.push(a),e}if(t.startsWith("- Mortal Realm")&&"Battlemage"===Object(d.last)(e.units)){const a=t.replace(/- Mortal Realm ?: /,"").trim();return e.units.pop(),e.units.push("Battlemage (".concat(a,")")),e}if("units"===c&&e.units.length>0){const a=t.split("-")[1].trim().replace("Weapon: ","").replace("Weapon : ","").trim();if(ne.e[a]){const t=[...e.units];return t.pop(),t.push(ne.e[a]),e.units=t,e}}if(n===u.m&&t.match(/^- (Artycle|Amendment|Footnote)( )?: /g)){const a=t.replace(/^- /,"").trim();return e.command_traits.push(a),e}let a=!1;if($e.forEach((r=>{if(a)return;let l=t.replace("- ".concat(r,": "),"").trim();if(l&&"None"!==l&&t.startsWith("- ".concat(r,": "))){if(n===u.J&&l.includes("(Stormkeep)")){const t=l.replace(/\(Stormkeep\)$/g,"(Stormhost)");return e.flavors.push(t),o=Ge.a.subFactionKeyMap["Celestial Sentinels"],void(a=!0)}if(n===u.F&&l.endsWith("(Host of Chaos)")){const t=Object($.a)(n).subFactionKeys.find((e=>l.includes(e)));if(t)return o=t,l=l.split(t)[0].trim(),e.flavors.push(l),void(a=!0)}if(Object(s.b)(n)){if(Object($.a)(n).subFactionKeyMap[l])return o=l,void(a=!0)}e.flavors.push(l),a=!0}})),a)return e;if(["- Host Option : ","- Host Option: ","- Big Name : "].forEach((r=>{if(!a&&t.startsWith(r)){const n=t.replace(r,"").trim();e.command_traits.push(n),a=!0}})),a)return e;if(t.match(/^- Lore of .+ ?: /)){const r=t.replace(/^- Lore of .+ ?: /,"").trim();"None"!==r&&e.spells.push(r),a=!0}return e}if(["TOTAL: ","LEADERS: ","ARTEFACTS: ","ADDITIONAL ENHANCEMENTS"].some((e=>t.startsWith(e))))return c="",e;if(c)if("endless_spells"===c&&a.includes(t))e.scenery=Object(d.uniq)(e.scenery.concat(t));else{if("units"===c){const a=Xe.find((e=>t.endsWith(" in ".concat(e))));a&&(e.battalions=Object(d.uniq)(e.battalions.concat(a)),t=t.replace(" in ".concat(a),""))}e[c]=Object(d.uniq)(e[c].concat(t))}return e}),i);return{allyFactionNames:[],allySelections:{},allyUnits:Object(d.uniq)(r),errors:[],factionName:n,origin_realm:l,realmscape_feature:null,realmscape:null,selections:m,subFactionName:o,unknownSelections:[]}},Ve={"Celestar Ballista":"units"},ze=(e,t)=>{const a=t.includes("".concat(e," : "))?"".concat(e," : "):t.includes(" (".concat(e,") : "))?" (".concat(e,") : "):t.includes("(".concat(e,"): "))?"(".concat(e,"): "):"".concat(e,": "),r=t.split(a)[1].trim();return Je(r)},Je=e=>{const t=new RegExp("".concat(["Court of Delusion -","Extremely Bitter -","Lore of Cinder -","Lore of Dark Sorcerey -","Lore of Eagles -","Lore of Leaves -","Lore of Smog -","Lore of the Phoenix -","Lore of Whitefire -","Universal Prayer Scripture: "].join("|")),"g");return e.replace(t,"").trim()},Qe=e=>{const t=e.split("- Tribe: ")[1].split("("),a=t[0].trim();try{let e=t[1]?t[1].split("Fierce Loathing: ")[1].replace(")","").trim():null;return e=e?"".concat(e," (Fierce Loathing)"):null,{flavor:a,trait:e}}catch(r){return{flavor:a,trait:null}}},Ze=e=>{const t=e.split("- City: ")[1].split("("),a=t[0].trim();try{return{flavor:a,trait:t[1]?t[1].split("Illicit Dealings: ")[1].replace(")","").trim():null}}catch(r){return{flavor:a,trait:null}}},et=["Amethyst Glow -","Blood Sigil -","Dark Acolyte -","Druid of the Everspring -","One Wiv Da Beast -","Loremaster -","Midnight Tome -","One with Fire and Ice -","Rune of Ulgu -","Secretive Warlock -","Vast Intellect -","Whitefire Tome -"],tt=(e,t)=>{const a=ze(e,t);if(!et.some((e=>a.startsWith(e))))return{trait:a,spell:null};const[r,n]=a.split(" - ").map((e=>e.trim()));return{trait:r,spell:"All Spells"===n?null:n}},at=async e=>{const{pdfPages:t,parser:a}=await(async e=>{try{p.a.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(p.a.version,"/pdf.worker.js");const a=await p.a.getDocument(e).promise;var t=[];for(let e=0;e<a.numPages;e++)t.push(e);const r=await Promise.all(t.map((async e=>{const t=await a.getPage(e+1);return(await t.getTextContent({normalizeWhitespace:!0})).items})));let n=[];const o=r.flat();o.forEach((e=>n.push(e.height)));const{headerHeight:l,itemHeight:i}=j(n),s=[o.map((e=>e.height>=l?b:e.height>=i?"ITEM: ".concat(e.str.trim()):e.str)).join(" ")],d=S(s),u=!d&&E(s),m=u||d||!v(s)?u?c.a:d?c.b:c.f:c.h;return h.g&&console.log("PDF Import string, copy me to JSON to debug: ",s),{pdfPages:s,parser:m}}catch(a){return console.error(a),{pdfPages:[],parser:c.f}}})(e);return{pdfPages:t,parser:a}},rt=e=>{const{handleError:t,isOnline:a,setParser:r,startProcessing:n,stopProcessing:o}=e;return l=>{try{const s=l[0],d=new FileReader;if(d.onabort=()=>{o()&&console.log("File reading was aborted.")},d.onerror=()=>{o()&&t(),console.log("File reading has failed.")},d.onload=async()=>{const n=new Uint8Array(d.result);if(s.type===c.c)return r(c.b),it(d.result,a,e);const{pdfPages:l,parser:u}=await at(n);if(r(u),l[0].startsWith("HEADER 1 aosreminders.com"))return Object(i.f)("ImportAoSReminders"),o()&&t("Unable to process AoS Reminder PDFs");if(u===c.b)return Object(i.f)("Import".concat(u,"PDF")),o()&&t("We don't support ".concat(c.b," PDFs yet. Try an HTML file!"));if(u===c.f)return ct(l,a,e);if(u===c.h){const t=(m=d.result,new TextDecoder("utf-8").decode(new Uint8Array(m)));return ot(t,a,e)}return lt(l,a,e);var m},n(),s&&s.type===c.d)d.readAsArrayBuffer(s);else{if(!s||s.type!==c.c){const e=s?s.type:c.f;return a&&Object(i.f)("Import".concat(e)),console.error("Error: File type not supported - ".concat(e)),o()&&t("Only feed me PDF and HTML files, please")}d.readAsText(s)}}catch(s){return console.error(s),o()&&t()}}},nt=e=>{const t=(a=e,[...Ue()(a,/^\((.+)\) Tj$/gm)].map((e=>e[1].trim())));var a;const r=(e=>{const t=Ke(e);return oe(t,c.h)})(t);return{parsedFile:t,parsedArmy:r}},ot=(e,t,a)=>{try{const{parsedFile:r,parsedArmy:n}=nt(e);if(t&&ee(n.errors)){const e={fileTxt:r,parser:c.h,fileType:c.d};Promise.resolve(l.a.createErrorFile(e))}a.handleDrop(n),a.stopProcessing()&&a.handleDone(),t&&Object(s.b)(n.factionName)&&Object(i.f)("Import".concat(c.h,"-").concat(n.factionName))}catch(r){console.error(r),a.stopProcessing()&&a.handleError(r.toString())}},lt=(e,t,a)=>{try{const r=(e=>{const t=ie(e);return oe(t,c.a)})((e=>{const t=e.map(A)[0];return h.g&&console.table(t),t})(e));if(t&&ee(r.errors)){const t={fileTxt:e,parser:c.a,fileType:c.d};Promise.resolve(l.a.createErrorFile(t))}a.handleDrop(r),a.stopProcessing()&&a.handleDone(),t&&Object(s.b)(r.factionName)&&Object(i.f)("Import".concat(c.a,"-").concat(r.factionName))}catch(r){console.error(r),a.stopProcessing()&&a.handleError(r.toString())}},ct=(e,t,a)=>{if(t){const t={fileTxt:e,parser:c.f,fileType:c.d};Promise.resolve(l.a.createErrorFile(t))}a.stopProcessing()&&a.handleError(),t&&Object(i.f)("Import".concat(c.f,"PDF"))},it=(e,t,a)=>{try{const r=(e=>{const t=Be(e);return oe(t,c.b)})(e);if(t&&ee(r.errors)){const t={fileTxt:e,parser:c.b,fileType:c.c};Promise.resolve(l.a.createErrorFile(t))}a.handleDrop(r),a.stopProcessing()&&a.handleDone(),t&&Object(s.b)(r.factionName)&&Object(i.f)("Import".concat(c.b,"-").concat(r.factionName))}catch(r){console.error(r),a.stopProcessing()&&a.handleError(r.toString())}};var st=a(93),dt=a(154),ut=a(45),mt=a(4),pt=a(579),ht=a(332),ft=a(343),Nt=a(55),gt=a(153),bt=a(9);var Et=e=>{let{handleDrop:t}=e;const{isMobile:a}=Object(gt.a)(),{isOnline:r}=Object(st.b)(),{setLoadedArmy:n}=Object(dt.b)(),{theme:l}=Object(ut.b)(),[s,d]=Object(mt.useState)(!1),[u,m]=Object(mt.useState)(!1),[p,h]=Object(mt.useState)(null),[f,N]=Object(mt.useState)(!1),[g,b]=Object(mt.useState)(c.h),E=Object(mt.useCallback)(rt({handleDrop:t,handleError:e=>{e&&h(e),m(!0),setTimeout((()=>{m(!1),h(null)}),6e3)},handleDone:()=>{d(!0),setTimeout((()=>d(!1)),6e3)},isOnline:r,setParser:b,startProcessing:()=>(n(null),Object(i.s)(),d(!1),m(!1),N(!0),!0),stopProcessing:()=>(N(!1),!0)}),[t]),{getRootProps:S,getInputProps:v}=Object(pt.a)({onDrop:E,accept:"".concat(c.d,", ").concat(c.c),multiple:!1});return Object(bt.jsxs)("div",{...S({className:l.dropzone}),children:[Object(bt.jsx)("input",{...v()}),Object(bt.jsxs)("div",{className:"".concat(Nt.a," text-center py-3"),children:[f&&Object(bt.jsx)(o.a,{}),f?"":u?p||"Unable to process this file":s?"".concat(g," file processed!"):a?"Tap to select your ".concat(c.a,"/").concat(c.h," PDF or ").concat(c.b," HTML"):"Drag your ".concat(c.a,"/").concat(c.h," PDF or ").concat(c.b," HTML here, or click to select"),s&&Object(bt.jsx)(ht.q,{className:"text-success ml-2"}),u&&Object(bt.jsx)(ft.d,{className:"text-danger ml-2"})]})]})},St=a(61),vt=a(94),At=a(109);const Ot="Created with Warhammer Age of Sigmar: The App",yt={ALLY_SUFFIX:" (ALLY)",ARMY_NAME_PREFIX:"Army Name: ",ARMY_NOTES_PREFIX:"Army Notes: ",ARTIFACTS_PREFIX:"Artefacts: ",BATTALIONS:"---BATTALIONS---",COMMAND_TRAITS_PREFIX:"Command Traits: ",CREATED_BY_WARHAMMER_APP:Ot,END_OF_ENTRY:"---END_OF_ENTRY---",END_OF_LIST:"---END_OF_LIST---",ENDLESS_SPELLS:"---ENDLESS_SPELLS---",ENHANCEMENTS:"---ENHANCEMENTS---",FACTION_NAME_PREFIX:"FACTION_NAME: ",FLAVOR_PREFIX:"FLAVOR: ",GRAND_STRATEGY_PREFIX:"Grand Strategy: ",INVALID_LIST:"Invalid: ".concat(Ot),MOUNT_TRAITS_PREFIX:"Mount Traits: ",PRAYERS_PREFIX:"Prayers: ",SCENERY:"---SCENERY---",SPELLS_PREFIX:"Spells: ",SUBFACTION_PREFIX:"SUBFACTION: ",TRIUMPHS_PREFIX:"Triumphs: ",UNITS:"---UNITS---",VALID_LIST:"Valid: ".concat(Ot),MANIFESTATIONS:"---MANIFESTATIONS---"},Tt=e=>{const t=(e=>{const t=e.split("\n").map((e=>e.replace(/[\u2018\u2019]/g,"'").replace(/[\u201c\u201d]/g,'"').replace(/[\u2011\u2013\u2014]/g,"-").replace(/\xa0/g," ").replace(/\xfa/,"u").replace(/\xe1/,"a").replace(/^(Units|BATTLELINE|LEADERS|OTHER|BEHEMOTH|LEADER)$/g,yt.UNITS).trim()));let a=!1;const r=t.map((e=>e===yt.UNITS?(a=!0,e):a?e:e.replace(/^- /g,""))).map((e=>e.replace(/ \(General\)$/g,"").replace(/^- General$/g,"").replace(/^General$/g,"").replace(/^Triumps: /g,yt.TRIUMPHS_PREFIX).replace(/^(Army Notes|General|Battle Trait Bonus|Reinforced|Battlefield Role|Battlepack|Points Limit|Battalion Slot Filled): .+/g,"").replace(/^Mark of Chaos: .+/g,"").replace(/^Host Option: .+/g,"").replace(/\*+$/g,"").replace(/^\*+/g,"").replace(/^[0-9]+ x /g,"").replace(/\([0-9]+\)$/g,"").replace(/^-(\w)/g,"- $1").replace(/^Points Cost: .+/g,yt.END_OF_ENTRY).replace(/^(Total Points|TOTAL POINTS): .+/g,yt.END_OF_LIST).replace("Endless Spells/Invocations",yt.ENDLESS_SPELLS).replace(/^ENDLESS SPELLS & INVOCATIONS/g,yt.ENDLESS_SPELLS).replace(/^(ENDLESS SPELL|INVOCATION)$/g,yt.ENDLESS_SPELLS).replace(/^(Core Battalions|CORE BATTALIONS|CORE BATTALIONS:)$/g,yt.BATTALIONS).replace(/^Enhancements$/g,yt.ENHANCEMENTS).replace(/^(Faction Terrain|TERRAIN)$/g,yt.SCENERY).replace(/^(Units|BATTLELINE|LEADERS|OTHER|BEHEMOTH|ARTILLERY|LEADER)$/g,yt.UNITS).replace(/^Army Faction: /g,yt.FACTION_NAME_PREFIX).replace(/^Army Type: /g,yt.SUBFACTION_PREFIX).replace(/^(Subfaction|Army Subfaction): /g,yt.FLAVOR_PREFIX).replace(/ \(Coalition Ally\)$/g,yt.ALLY_SUFFIX).replace(/ \(Ally\)$/g,yt.ALLY_SUFFIX).replace(/^Artefacts of Power: /g,yt.ARTIFACTS_PREFIX).replace(/^Grand Strategies: /,yt.GRAND_STRATEGY_PREFIX).replace(/^Great Endrinworks: /g,yt.ARTIFACTS_PREFIX).replace(/^Cursed Mutations: /g,yt.MOUNT_TRAITS_PREFIX).replace(/^Drakeblood Curses: /g,yt.COMMAND_TRAITS_PREFIX).replace(/^Seasons of War: /g,yt.SUBFACTION_PREFIX).trim())).filter((e=>e&&e.length>2)),n=Object.values(yt);return r.filter((e=>!e.startsWith("- ")||n.some((t=>e.startsWith("- ".concat(t)))))).map((e=>e.replace(/^- /,"").trim()))})(e),a=zt(t);return oe(a,c.g)},{ALLY_SUFFIX:jt,ARMY_NAME_PREFIX:Ct,ARMY_NOTES_PREFIX:Rt,ARTIFACTS_PREFIX:It,BATTALIONS:Lt,COMMAND_TRAITS_PREFIX:Ft,CREATED_BY_WARHAMMER_APP:Pt,END_OF_ENTRY:_t,END_OF_LIST:wt,ENDLESS_SPELLS:Wt,ENHANCEMENTS:Dt,FACTION_NAME_PREFIX:Mt,FLAVOR_PREFIX:xt,GRAND_STRATEGY_PREFIX:Bt,INVALID_LIST:kt,MOUNT_TRAITS_PREFIX:Ut,PRAYERS_PREFIX:Gt,SCENERY:Ht,SPELLS_PREFIX:Yt,SUBFACTION_PREFIX:$t,TRIUMPHS_PREFIX:Xt,UNITS:qt,VALID_LIST:Kt,MANIFESTATIONS:Vt}=yt,zt=e=>{const t=Ye(e);let a=[],r="",n="",o="",l=He.a.map((e=>e.name));const c=Object.keys(X.d).reduce(((e,t)=>(e[t]=[],e)),{}),i=t.reduce(((e,t)=>{if([wt,Dt,Kt,kt,_t].includes(t)||t.startsWith(Ct)||t.startsWith(Rt)||t.endsWith(Pt)||t.startsWith("Magnificent Bonus: "))return e;if(t.startsWith(Mt)){const a=t.replace(Mt,"").trim(),o=ne.d[a];if(r=(null===o||void 0===o?void 0:o.factionName)||a,(null===o||void 0===o?void 0:o.subFactionName)&&(n=o.subFactionName),Object(s.b)(r)){const e=Object($.a)(r).AggregateArmy.Battalions.map((e=>e.name));l=l.concat(e)}return e}if(t.startsWith($t))return n=t.replace($t,"").trim(),e;if(t.startsWith(xt))return r===u.G?(n=t.replace(xt,"").trim(),e):(e.flavors.push(t.replace(xt,"").trim()),e);if(t===qt)return o="units",e;if(t===Lt)return o="battalions",e;if(t===Wt)return o="endless_spells",e;if(t===Ht)return o="scenery",e;if(t.startsWith(Xt)){const a=t.replace(Xt,"").split(",").map((e=>e.trim()));return e.triumphs=e.triumphs.concat(a),e}if(t.startsWith(Yt)){const a=t.replace(Yt,"").split(",").map((e=>e.trim()));return e.spells=e.spells.concat(a),e}if(t.startsWith(It)){const a=t.replace(It,"").split(",").map((e=>e.trim()));return e.artifacts=e.artifacts.concat(a),e}if(t.startsWith(Bt)){const a=t.replace(Bt,"").trim();return e.grand_strategies.push(a),e}if(t.startsWith(Gt)){const a=t.replace(Gt,"").split(",").map((e=>e.trim()));return e.prayers=e.prayers.concat(a),e}if(t.startsWith(Vt)){const a=t.replace(Vt,"").split(",").map((e=>e.trim()));return e.manifestations=e.manifestations.concat(a),e}if(t.endsWith(jt)){const r=t.replace(jt,"").trim();return a.push(r),e}if(t.startsWith(Ft)){const a=t.replace(Ft,"").trim();return e.command_traits.push(a),e}if(t.startsWith(Ut)){const a=t.replace(Ut,"").trim();return e.mount_traits.push(a),e}if(o){if("units"===o||"battalions"===o){const a=l.find((e=>e===t.trim()));if(a)return e.battalions=Object(d.uniq)(e.battalions.concat(a)),e;o="units"}e[o]=Object(d.uniq)(e[o].concat(t.trim()))}return e}),c);return{allyFactionNames:[],allySelections:{},allyUnits:Object(d.uniq)(a),errors:[],factionName:r,origin_realm:null,realmscape_feature:null,realmscape:null,selections:i,subFactionName:n,unknownSelections:[]}},Jt=e=>{let{handleDrop:t}=e;const{isOnline:a}=Object(st.b)(),{isDark:r}=Object(ut.b)(),[o,d]=Object(mt.useState)(""),[u,m]=Object(mt.useState)(!1),p=o.includes("Made with AoS App List Cleaner"),h=o&&!p&&(o.includes(yt.CREATED_BY_WARHAMMER_APP)||o.startsWith("Army Name: ")||o.includes("Army Type: ")||o.includes("Battalion Slot Filled: ")||o.includes("Battlepack: "));return Object(bt.jsx)(bt.Fragment,{children:Object(bt.jsxs)("div",{className:"row",children:[Object(bt.jsx)("div",{className:"col-12",children:Object(bt.jsx)("div",{className:"form-group",children:Object(bt.jsx)("textarea",{name:"ImportTextarea",id:"ImportTextarea",className:"form-control ImportTextarea".concat(r?"-Dark":""," ").concat(o&&!h?"is-invalid":""),placeholder:"Or paste your Warhammer App list here",onChange:e=>{e.preventDefault(),d(e.target.value)},value:o})})}),h&&Object(bt.jsx)("div",{className:"col-12 pb-3",children:Object(bt.jsxs)(n.a,{className:"btn ".concat(r?"btn-outline-light":""," btn-success btn-block"),type:"button",onClick:()=>{m(!0);const e=Tt(o);if(a&&ee(e.errors)){const e={fileTxt:o,parser:c.g,fileType:c.e};Promise.resolve(l.a.createErrorFile(e))}return a&&Object(s.b)(e.factionName)&&Object(i.f)("Import".concat(c.g,"-").concat(e.factionName)),setTimeout((()=>m(!1)),1e3),t(e)},children:["Import".concat(u?"ing":""," "),u?Object(bt.jsx)("span",{className:"spinner-border spinner-border-sm ml-2",role:"status","aria-hidden":"true"}):""]})}),o&&!h&&Object(bt.jsx)("div",{className:"col-12 text-center",children:Object(bt.jsx)("small",{className:"text-danger",children:p?"We don't support lists from AoS App List Cleaner, sorry.":"This doesn't look like a list from the Warhammer App."})})]})})};t.default=()=>{const[e,t]=Object(mt.useState)([]),{isSubscribed:a}=Object(St.b)(),{saveArmyToS3:r}=Object(dt.b)(),n=Object(mt.useCallback)((e=>{t(e.errors),Z(e.errors)||(Object(At.a)(e),r(e))}),[r]);return Object(bt.jsxs)(bt.Fragment,{children:[Object(bt.jsx)("div",{className:"row my-2 d-flex justify-content-center",children:Object(bt.jsx)("div",{className:"col-12 col-lg-9 col-xl-9 px-1",children:Object(bt.jsxs)("div",{className:"row my-2 d-flex justify-content-center align-content-center",children:[Object(bt.jsx)("div",{className:"col-12 col-lg-6",children:Object(bt.jsx)(Et,{handleDrop:n})}),Object(bt.jsx)("div",{className:"col-12 col-lg-6 pt-2 pt-lg-0",children:Object(bt.jsx)(Jt,{handleDrop:n})})]})})}),!a&&Object(bt.jsx)(Zt,{}),e.length>0&&Object(bt.jsx)("div",{className:"row d-flex justify-content-center",children:Object(bt.jsx)("div",{className:"col-12 col-lg-6 col-xl-6",children:e.map(((e,t)=>Object(bt.jsx)(Qt,{text:e.text,severity:e.severity,reason:e.reason},"".concat(e.text,"_").concat(t))))})})]})};const Qt=e=>{const{text:t,reason:a,severity:o}=e,[l,c]=Object(mt.useState)(!0);if(!l)return null;const s={"ally-warn":"alert-warning","ambiguity-warn":"alert-warning","deprecation-warn":"alert-warning",warn:"alert-warning",error:"alert-danger"}[o],d="error"===o?"Error":"Warning",u={error:"".concat(t),"ally-warn":"".concat(t),"ambiguity-warn":"".concat(t),"deprecation-warn":"'".concat(t,"' has been removed from AoS Reminders because ").concat(a,"."),warn:"We couldn't find '".concat(t,"'. It may be a typo or an ally item. Make sure to add it manually.")}[o];return Object(bt.jsx)("div",{className:"mb-2",children:Object(bt.jsxs)("div",{className:"alert ".concat(s," text-center fade show d-flex"),role:"alert",children:[Object(bt.jsxs)("div",{className:"flex-grow-1",children:[Object(bt.jsxs)("strong",{children:[d,":"]})," ",u,Object(bt.jsx)("br",{}),Object(bt.jsxs)("small",{children:["Unexpected ",d.toLowerCase(),"? Create an issue on"," ",Object(bt.jsx)(r.b,{href:"".concat(h.b,"/issues"),onClick:e=>Object(i.b)("failedImport-GithubClick"),label:"Github",children:"Github"})," ","and be sure to attach this file."]})]}),Object(bt.jsx)("div",{className:"align-self-start ml-2",children:Object(bt.jsx)(n.a,{className:"close","aria-label":"Close",onClick:()=>c(!1),children:Object(bt.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})})]})})},Zt=()=>Object(bt.jsx)("div",{className:"row mt-2 d-flex justify-content-center",children:Object(bt.jsx)("div",{className:"col-12 col-lg-6 col-xl-6",children:Object(bt.jsx)("div",{className:"alert alert-info text-center",role:"alert",children:Object(bt.jsxs)("small",{children:["Heads up! This will eventually be a ",Object(bt.jsx)(vt.a,{to:h.d.SUBSCRIBE,children:"subscriber-only"})," feature."]})})})})}}]);
//# sourceMappingURL=18.bbb0a665.chunk.js.map