(this["webpackJsonpaos-reminders"]=this["webpackJsonpaos-reminders"]||[]).push([[20],{335:function(e,t,s){"use strict";var c=s(119),a=s(45),n=(s(4),s(342)),l=s.n(n),i=s(9);l.a.setAppElement("#root");t.a=e=>{const{children:t,closeModal:s,isOpen:c,label:n,isProcessing:r=!1}=e,{isDark:j}=Object(a.b)(),b="Modal-".concat(r?"Transparent":j?"Dark":"Light");return Object(i.jsx)(l.a,{className:b,contentLabel:n,isOpen:c,onRequestClose:s,overlayClassName:"Modal-Overlay",children:Object(i.jsxs)("div",{className:"container",children:[r&&Object(i.jsx)(o,{}),Object(i.jsx)("div",{hidden:r,children:t})]})})};const o=e=>{let{isDark:t=!1}=e;const s=t?"light-gray":"dark";return Object(i.jsx)("div",{className:"d-flex flex-row justify-content-center",children:Object(i.jsx)(c.a,{variant:s,size:"large"})})}},337:function(e,t,s){"use strict";var c=s(52),a=s(4),n=s(22);var l=()=>{const e=window.screenX+(window.innerWidth-400)/2,t=window.screenY+(window.innerHeight-600)/2;return window.open(void 0,"auth0:authorize:popup","left=".concat(e,",top=").concat(t,",width=").concat(400,",height=").concat(600,",resizable,scrollbars=yes,status=1"))};t.a=e=>{const{isLoading:t,loginWithPopup:s}=Object(c.b)(),[i,o]=Object(a.useState)(!1);return Object(a.useMemo)((()=>({isLoggingIn:t&&!i,popupIsClosed:i,login:t=>{var c;null===t||void 0===t||null===(c=t.preventDefault)||void 0===c||c.call(t),Object(n.b)("".concat(e.origin,"-Login"));const a=l();o(!1);const i=setInterval((()=>{(null===a||void 0===a?void 0:a.closed)&&(clearInterval(i),o(!0),Object(n.f)("".concat(e.origin,"-Login-Closed")),e.onPopupClose&&e.onPopupClose())}),1e3);return s({authorizationParams:{redirect_uri:window.location.href}},{popup:a})}})),[t,s,i,e])}},341:function(e,t,s){"use strict";var c=s(92),a=s(335),n=s(45),l=s(4),i=s(332),o=s(9);t.a=e=>{const{theme:t}=Object(n.b)(),[s,r]=Object(l.useState)(!1),{bodyText:j="",children:b=null,closeModal:d,confirmBtnClass:m=t.modalDangerClass,confirmText:O="Confirm",denyBtnClass:u=t.modalConfirmClass,denyText:h="Cancel",disableConfirmIcon:x=!1,headerText:v="",isOpen:f=!1,onConfirm:p=null,onConfirmAsync:y=null,onDeny:g=null}=e,C=e.confirmIcon||i.e;return Object(o.jsxs)(a.a,{isOpen:f,isProcessing:s,closeModal:d,label:"".concat(v," Confirmation Modal"),children:[Object(o.jsx)("div",{className:"flex-row",children:Object(o.jsxs)("div",{className:"col ".concat(t.text," text-center"),children:[Object(o.jsx)("h4",{className:"mb-3",children:v}),j&&Object(o.jsx)("p",{className:"mb-3",children:j}),b?Object(o.jsx)("div",{className:"mb-3",children:b}):null]})}),Object(o.jsxs)("div",{className:"d-flex flex-row justify-content-around",children:[Object(o.jsxs)(c.a,{className:m,onClick:async e=>{if(e.preventDefault(),y)try{r(!0),await y()}catch(t){console.error(t)}p&&p(),d()},children:[!x&&Object(o.jsx)(C,{className:"mr-2"})," ",O]}),Object(o.jsx)(c.a,{className:u,onClick:async e=>{e.preventDefault(),g&&g(),d()},children:h})]})]})}},356:function(e,t,s){"use strict";var c=s(334),a=s(341),n=s(45),l=(s(4),s(332)),i=s(22),o=s(11),r=s(9);t.a=e=>{let{closeModal:t,isOpen:s,featureName:j}=e;const{theme:b}=Object(n.b)();return Object(r.jsx)(a.a,{closeModal:t,confirmBtnClass:"btn btn-primary",confirmIcon:l.c,confirmText:"Subscribe",denyBtnClass:b.modalConfirmClass,headerText:"Subscriber-Only Feature",isOpen:s,onConfirm:()=>{Object(i.b)("".concat(j,"-Modal-Subscribe")),t(),window.location.replace(o.d.SUBSCRIBE)},children:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{children:"Saving data to the cloud increases the hosting fees for AoS Reminders."}),Object(r.jsx)("p",{children:"Please consider subscribing to use this feature (and many more!)"}),Object(r.jsx)("p",{children:Object(r.jsxs)("small",{children:[Object(r.jsx)(c.b,{href:"mailto:aosreminders@gmail.com",label:"Email me",children:"Send me an email"})," ","if you have feedback or questions."]})})]})})}},396:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var c=s(45),a=s(6),n=s(63),l=s(4),i=s(40),o=s(9);const r=e=>{let{army:t}=e;const{factionName:s,subFactionName:r,selections:b,allySelections:d,origin_realm:m,realmscape:O,realmscape_feature:u}=t,{theme:h}=Object(c.b)(),x=Object(l.useMemo)((()=>Object(a.sortBy)(Object.keys(b).filter((e=>b[e].length)))),[b]),v=Object(l.useMemo)((()=>Object.keys(d).reduce(((e,t)=>{var s,c;const a=(null===(s=d[t])||void 0===s?void 0:s.units)||[],n=(null===(c=d[t])||void 0===c?void 0:c.battalions)||[];return e.units=e.units.concat(a),e.battalions=e.battalions.concat(n),e}),{units:[],battalions:[]})),[d]),f=Object(n.a)(s);return(null===f||void 0===f?void 0:f.subFactionKeys)?Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("table",{className:"table table-sm",children:Object(o.jsxs)("tbody",{children:[Object(o.jsx)(j,{theme:h,items:[Object(i.e)(s)],title:"Faction"}),!!r&&f.subFactionKeys.length>1&&Object(o.jsx)(j,{theme:h,items:[r],title:"SubFaction"}),x.map(((e,t)=>Object(o.jsx)(j,{theme:h,items:Object(a.sortBy)(b[e]),title:e},"".concat(e,"_").concat(t)))),v.units.length>0&&Object(o.jsx)(j,{theme:h,items:Object(a.sortBy)(v.units),title:"Allied Units"}),v.battalions.length>0&&Object(o.jsx)(j,{theme:h,items:Object(a.sortBy)(v.battalions),title:"Allied Battalions"}),m&&Object(o.jsx)(j,{theme:h,items:[m],title:"Realm of Origin"}),O&&Object(o.jsx)(j,{theme:h,items:[O],title:"Realm of Battle"}),u&&Object(o.jsx)(j,{theme:h,items:[u],title:"Realm Feature"})]})})}):Object(o.jsx)(o.Fragment,{})},j=e=>{let{title:t,items:s,theme:c}=e;return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{className:"text-nowrap ".concat(c.textMuted),children:Object(o.jsx)("strong",{children:Object(i.e)(t)})}),Object(o.jsx)("td",{children:s.map(((e,t)=>Object(o.jsx)("span",{className:"badge badge-secondary text-wrap mx-1",children:e},"".concat(e,"_").concat(t))))})]})}},581:function(e,t,s){"use strict";s.r(t);var c=s(52),a=s(155),n=s(92),l=s(396),i=s(335),o=s(154),r=s(61),j=s(45),b=s(27),d=s(4),m=s(332),O=s(56),u=s(22),h=s(46),x=s(157),v=s(9);const f=e=>{let{closeModal:t,modalIsOpen:s,showSavedArmies:c}=e;const a=Object(O.c)(b.f.selectCurrentArmy),{relevantNotes:f}=Object(x.a)(),p=Object(O.c)(b.f.selectReminders),{isActive:y}=Object(r.b)(),{saveArmy:g}=Object(o.b)(),{theme:C}=Object(j.b)(),[N,w]=Object(d.useState)(""),[S,A]=Object(d.useState)(!1),k=async e=>{var s;if(null===e||void 0===e||null===(s=e.preventDefault)||void 0===s||s.call(e),y){A(!0);const e=Object(h.c)({...a,hiddenReminders:p,armyName:N,notes:f},"save");await g(e),A(!1),w(""),t(),c(),Object(u.f)("SaveArmy-".concat(a.factionName))}};return Object(v.jsxs)(i.a,{isProcessing:S,isOpen:s,closeModal:t,label:"Save Army Modal",children:[Object(v.jsx)("div",{className:"row",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)("form",{children:Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("label",{htmlFor:"nameInput",children:Object(v.jsx)("strong",{className:C.text,children:"Army Name"})}),Object(v.jsx)("input",{className:"form-control form-control-sm","aria-describedby":"nameHelp",placeholder:"Enter army name",value:N,onKeyDown:e=>{"Enter"===e.key&&(e.stopPropagation(),e.preventDefault(),k())},onChange:e=>{e.preventDefault(),w(e.target.value)},tabIndex:0,autoFocus:!0}),Object(v.jsx)("small",{id:"nameHelp",className:"form-text ".concat(C.textMuted),children:"Hint: Use a descriptive name."})]})})})}),Object(v.jsx)("div",{className:"row",children:Object(v.jsxs)("div",{className:"col pl-0",children:[Object(v.jsxs)(n.a,{className:C.modalConfirmClass,onClick:k,children:[Object(v.jsx)(m.t,{className:"mr-2"})," Save"]}),Object(v.jsx)(n.a,{className:C.modalDangerClass,onClick:t,children:"Cancel"})]})}),Object(v.jsx)("div",{className:"row mt-3",children:Object(v.jsx)("div",{className:"col",children:Object(v.jsx)(l.a,{army:a})})})]})};var p=s(356),y=s(93),g=s(337);t.default=e=>{let{showSavedArmies:t}=e;const{isOffline:s}=Object(y.b)(),{isAuthenticated:n}=Object(c.b)(),{isActive:l}=Object(r.b)(),{login:i}=Object(g.a)({origin:"SaveArmyBtn"}),[o,j]=Object(d.useState)(!1),[b,m]=Object(d.useState)(!1);return s?Object(v.jsx)(a.e,{text:"Save Army"}):Object(v.jsxs)(v.Fragment,{children:[!n&&Object(v.jsx)(C,{handleClick:i}),n&&!l&&Object(v.jsx)(C,{handleClick:()=>m(!0)}),l&&Object(v.jsx)(C,{handleClick:()=>j(!0)}),o&&Object(v.jsx)(f,{showSavedArmies:t,modalIsOpen:o,closeModal:()=>j(!1)}),b&&Object(v.jsx)(p.a,{isOpen:b,featureName:"SaveArmy",closeModal:()=>m(!1)})]})};const C=e=>Object(v.jsxs)(n.a,{onClick:e.handleClick,children:[Object(v.jsx)(m.t,{className:"mr-2"})," Save Army"]})}}]);
//# sourceMappingURL=20.8cf717a2.chunk.js.map